# 0104. 概率计算：定义问题比计算更重要

刘嘉·概率论 22 讲

2020-07-19

上一讲，我们学习了概率论的第三块基石 —— 独立性。知道了事件的独立性是概率论中，定义随机事件相互关系的一个重要概念。只有弄清楚了随机事件的关系，我们才能正确计算它们的概率。这一讲，我们就重点说说概率论的最后一块基石 —— 概率计算，也就是如何计算概率。任何一个现实问题，我们都不仅要定性的了解，还要定量的描述。而概率计算，就是解决定量问题的。如果没有概率计算，我们对这件事的认识就只能停留在模模糊糊的直觉层面，很容易出错。

## 4.1 概率计算的三个法则

常见的概率计算题都是什么样的呢？稍有了解的人都知道，它们非常折磨人。比如，「从一副扑克中有放回的一张张抽取，求在第 6 张得到全部 4 种花色的概率」；还有类似什么「箱子里装有号码 1-N 的球，有放回的或者无放回的摸 n 次球，问正好是严格上升次序排列的概率是多少」……

我知道，听到这种题目，你立马准备关掉音频，只想静静。不过好消息是，我不打算讲这些。其实，概率计算没那么难。这一讲，我就抛开那些复杂的问题，跟你讲一讲概率计算的本质。再复杂的概率问题，也都是基于三个计算法则的。哪三个法则呢？1）我称之为「排列组合法则」；2）是「加法法则」；3）是「乘法法则」。相信我，只涉及加减乘除四则运算，你一定能听得懂。

### 4.1.1 排列组合法则

排列组合法则适用于结果有限，而且每种结果都是等可能性的情况。计算方式很简单，就是这个随机事件出现的次数除以所有可能的结果的个数。比如掷骰子出现 2 的概率是多少，掷骰子可能的结果是 1 到 6，共 6 个可能，2 是其中 1 个结果，所以概率就是 1 除以 6，就是 1/6。是不是很简单？

不过要注意的是，我刚才说的是「随机事件出现的次数除以所有可能的结果的个数」，是「所有可能的结果」。为什么要强调这个呢？我给你举个例子。如果生男生女是等概率的，朋友家先后要了两个小孩，请问都是男孩的概率是多少呢？按刚才说的，列出所有结果，所有结果是几种呢？是「全是男孩、全是女孩、一男一女」这三种吗？不是的。正确的结果其实是四种 —— 男男、男女、女男、女女，所以两个都是男孩的概率不是 1/3，而是 1/4。

「先有个男孩再有个女孩」和「先有个女孩再有个男孩」，虽然都是一男一女，但它们不一样，它是两种结果。排列组合排列组合，就是「排列」和「组合」，排列是要分先后顺序的，所以这个法则也要分先后。其实，大部分这类的概率问题，考的都不是你的计算能力，而是排列组合的能力，看你能不能把所有的情况都排出来。

刚才说了，排列组合法则有个适用范围，就是针对等可能性的概率问题。如果不是等可能性的概率问题怎么办呢？比如糖尿病的发病率，或者高考上清华大学的概率，这些怎么计算呢？也简单，用这个随机事件出现的次数，除以样本的总量，就能计算出了。你看，其实和排列组合法则的逻辑一样，都是用随机事件出现的次数，除以所有可能的结果的个数。

### 4.1.2 加法法则

如果说排列组合法则是针对单个随机事件的概率计算，加法法则针对的就是多个随机事件。以两个随机事件为例，一个随机事件发生或者另一个随机事件发生的概率，也就是这两个随机事件发生其一的概率，等于两个随机事件各自发生概率的和。三个随机事件，就是三个概率之和；四个随机事件，就是四个概率之和。这就是加法法则。

比如，开赛前专业分析师预测，费德勒获得冠军的概率是 20%，获得亚军的概率是 15%，那费德勒闯入决赛的概率，就是获得冠军的概率，加上获得亚军的概率，`20% + 15% = 35%`。不过，加法法则也有个限定条件，就是这两个随机事件不能同时发生，我们也称之为「互斥」。拿刚才的例子来说，费德勒夺冠和获得第二名不能同时发生，你不能说他既获得了冠军又获得了亚军。只有这样的随机事件，才能直接用加法法则。

举个反例。天气预报说，周六下雨的概率是 50%，周日下雨的概率是 60%，那周末两天有降雨的概率是多少呢？是周六下雨的概率直接加上周日下雨的概率吗？一加结果是 110%，超过 1 了。前面说了，概率一定在 0 和 1 之间，不可能大于 1，所以这么算肯定不对。到底哪里错了呢？可能你已经发现了，周六下雨和周日下雨并不互斥，周六下雨了，周日也可以下雨，它们可以同时发生。也就是说，还存在「周六和周日都下雨」的情况，所以不能直接用加法法则。那怎么办呢？用加法法则得出的结果减去周六周日都下雨的概率就好了。

### 4.1.3 乘法法则

和加法法则一样，乘法法则也是针对多个随机事件的概率计算。以两个随机事件为例，加法法则是两个随机事件发生其一的概率，将两个随机事件各自发生的概率相加。而乘法法则是两个独立事件同时发生的概率，将两个随机事件各自发生的概率相乘就行了。比如，问「木村拓哉和金城武一起向你表白的概率是多少」，就用乘法法则，等于木村拓哉向你表白的概率乘以金城武向你表白的概率。不过，乘法法则也有个限定条件，得是独立事件。如果是独立事件，彼此互不影响，可以直接使用乘法法则。如果是非独立事件，那就不能直接乘了，而是要对乘法法则做个变形。具体怎么变，我们后面讲条件概率时会详细解释。

## 4.2 概率计算的真正困难是定义问题

概率计算是不是很简单？是不是只需要加减乘除四则运算就可以？正因为概率计算简单，所以概率论考试的时候，老师只能把题目描述得非常复杂。什么「或」「同时」「有放回」「无放回」，一字之差，结果就天壤之别。大部分人不会做概率题，不是他不会计算，而是他没看明白题目。也许打败他的不是数学，而是语文。真正搞懂题目的意思，才是概率论考试的重点。

概率老师这么做是为啥呢？是为了故意把学生卡住，不让他毕业吗？当然不是。这其实是一种思维方式的训练。让学生在复杂的题目中，寻找「或」，寻找「同时」，辨析互斥，辨析独立，计算和分辨各种复杂的排列组合，从而学会把考卷上的题目翻译成一个概率问题。

要知道，我们在实际生活中遇到的概率问题，可远比加减乘除困难，甚至比考卷上设定的题目更难。现实中我们不会计算概率，往往就是因为不会把一个现实问题，准确地翻译成「对」的概率问题。结果就好像我们有很多把钥匙，却总是拿它们开错的锁一样，当然打不开。

举个例子，看到飞机失事的新闻后，有些人常常开玩笑地说，「从概率的角度，下一班飞机更安全。因为如果飞机失事的概率是百万分之一，那么飞机连续两次失事的概率就是百万分之一乘以百万分之一，也就是万亿分之一。」你可能要笑了，这就是典型的「赌徒谬误」嘛。一般人认为，赌徒谬误产生的原因是人们没弄懂独立事件。但我要告诉你的是，即便弄懂了独立性，知道两个航班互相独立，很多人还是会算错，因为这些人对现实问题「翻译得不对」。他们混淆了「飞机失事两次的概率」和「飞机再次失事的概率」。注意，这两个看似差不多的表述差别是很大的。

「一个事件发生两次的概率」是什么？简单地说，是你准备扔两次硬币，注意，还没扔哦，问两次都是正面的概率是多少呢？用乘法法则，1/2 乘以 1/2，结果是 1/4。换到飞机失事的例子中，飞机连续失事的概率，注意，现在飞机还没有失事哦，就是飞机失事的概率相乘，确实可能是万亿分之一。

而「一件事再次发生的概率」呢？是已经扔一次硬币，正面朝上，问下一次还是正面的概率是多少？我们知道，抛硬币是独立事件，再次发生的概率不受前面结果的影响，结果自然还是 1/2。换到飞机失事的例子，一架飞机失事后，注意，这架飞机已经失事了哦，那再次失事的概率，就是普通飞机失事的概率，还是百万分之一 。

你看，对现实问题的翻译不同，概率计算的方式就不一样。我们说的是「再一次飞机失事的概率」，但你计算的是「连续两次飞机失事的概率」，当然不能反映现实问题，必然会出错。正确翻译现实问题，是概率计算最复杂的地方。概率思维的核心，就是准确地将现实问题转换成对的概率问题。这也是这门课要重点带给你的。

## 黑板墙

思考题：你有过因为没有准确地翻译现实问题，而导致失误的经历吗？

### 01

下雨问题，我觉得我想明白了，老师问的是周末下雨的概率，周末下雨包含三种情况：1）周六下雨，周日不下雨 `50%*(1-60%)=20%`。2）周六不下雨，周日下雨 `(1-50%)*60%=30%`。3）周六周日都下雨 `50%*60%=30%`。以上三种情况是互斥的可以用加法法则：`20%+30%+30%=80%`。还有一种反证发，只要求出周未两天都不下雨的概率，用 1 去减就可以了两天都不下雨的概率 `(1-50%)*(1-60%)=20%`，`100%-20%=80%`。

### 02

机场和航空公司对飞机每天都做大量检查说可以「降低飞机发生事故的概率」这种降低不是「数学层面」吧。社会上说的这种「提高或降低某某事件发生的概率」是否应该用「频率」这个词合理一些呢？

作者回复：这是条件概率，第四模块会详细讲。

### 03

万老师在书里这么写过一段：假设现在是 NBA（美国职业篮球联赛）決赛，七局四胜。比赛双方ー强一弱，单场获胜概率分別是 55% 和 45%。那请问，这个强队最终得冠军的概率有多大？55% 对 45% 这个优势似乎已经挺大了，七局四胜的一个重要目的就是为了避免偶然性，让强队久经考验脱颖而出。但即便如此，这个强队最终夺冠的概率也只有 60%。老师能给推到一下计算过程吗？

作者回复：强队只有 55% 的获胜概率，7 场 4 胜居然拥有了 60% 的获胜概率，就知足吧 ee

计算过程：（就是乘法原则）1）4 场获胜概率：`0.55*0.55*0.55*0.55=0.0915`。2）5 场获胜概率：`(4)*0.45*0.55*0.55*0.55*0.55=0.1647`，第五场一定是强队获胜，前四场弱队一场。3）6 场获胜概率：`(5*4/2)*0.45*0.45*0.55*0.55*0.55*0.55=0.1853`。4）7 场一样：0.168。总共获胜的概率是：60.8%。

### 04

概率论是上帝视角，独立完成一件事的不同种方法，加法原理；分步完成一件事的若干选择，乘法原理；还有排列，组合。我们都是从上帝视角来完成的：首先，所有可能的结果是什么，即求解样本空间；再挑选出满足要求的事件即可。一个抽签问题：若不放回的抽取红色小球，第几次抽取的概率都相同。这是因为，前面不管多少次抽，那也是不确定性事件。若之前抽中了，后面抽的概率降低；若之前抽空了，后面抽的概率升高。概率论讨论的是，事情发生之前的概率。

作者回复：频率法大体是是上帝视角，而贝叶斯解逆概率问题关注现实视角。

### 05

说道「飞机失事的概率」，以前虽然也有人从概率的角度上解释过，说比火车安全呀，比汽车安全呀，但每次乘飞机，自己还是有那么一些些紧张，因为我深知笑来老师一句话：「万分之一的概率，不一定意味着要一万次才发生，完全有可能第一次就发生啊。」刘老师你怎么看？

直到后来我从一本讲「微死亡」等内容的书上了解到其实乘坐飞机比坐在家里都还更安全！其实就是坐在家里的「微死亡」指标居然都是大于乘坐飞机的！你看，我们人类的这个情绪脑呀，明明从概率的角度上已经知道乘飞机很安全，却还是需要做个类比（当然有客观数据支撑），在感性上影响自己的大脑，オ会最终使得自己心安呀。我想这也是为什么刘老师三番五次强调我们这门课不讲那些太过抽象的数学概念，知识，而是尽量多举生活中的例子，用接地气的语言娓娓道来的原因吧。

作者回复：飞机失事概率是百万分之ー，那么我想知道飞 100 万次，发生一次失事的概率是多少？一次都不发生的概率是多少，发生 2 次的概率是多少？等等。这就是整体概率大体知道的情况下，计算发生次数的概率，得用到这门课最难的一讲，泊松分布。但你可以有一个基本认知，1/100 万的概率，做 100 万次一次都不发生的概率是 37%，发生一次也是 37%，发生两次和两次以上 26%。

### 06

听完一节我联想到了以前想过但没想明白的一道关于人口的概率问题。假定必须考虑到有些家庭一定至少男孩的需要，下面有三个方案，哪个方案会破坏人口总数上的男女孩平衡：1）生二胎。2）随便生，没有限制。3）如果女孩先出生，可以继续要，直到有了男孩就停止。

其实三种方案都不会破坏。因为无论哪种方案都不会打破男女比例均衡，因为样本总数没变，性别慨率也没有变，那么最终也影响不到男女比例均衡的大数法则。但是通过医学上的性别鉴定（以前是 B 超，现在有抽血测 NDA）来选择出生性别就会破坏了男女比例均衡，因为它增加了样本总数，从而破坏了男女比例均衡。所谓计划生育政策，初衷在于想控制人口增加速度或人口总数，本意也不想破坏男女均衡，但用简单粗暴的办法所造成的结果是。算了，在这里我不想评价这个政策的是与非，所谓「知我罪我，其性春秋」，秋万代都有人评，我亦非仗马。

我只是想如果能回到那个时间点，我想把刘嘉老师的概率论的课推荐给具体的政策制定者听一听。较优的策略起码应是立法杜绝医学性别鉴定，弹性调整各域人口出生总量。一昧地只盯着结果，用现在的话说，只关注结果导向，不考虑实施过程当中的具体措施所引发的蝴蝶效应而造成的灾难，可能会遗祸无穷。