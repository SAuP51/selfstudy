# 0107. 等价性：信息是如何压缩的？

> 吴军·信息论 40 讲

2019-06-05

这一讲的主题是，信息的等价性，这一讲我会告诉你信息是怎么被压缩的。

你可能会好奇，我为什么要让你知道信息压缩的原理，你又不会真的去压缩视频。在回答你这个问题之前，我们先从上节课最后留下的那个问题谈起，秦王子婴到底是谁？

我们上一讲说《史记》这本书里对于他的身世就有三个说法，而且前后差出两代人。第一个说法，说他是秦始皇的弟弟，第二个说法：他是秦二世的哥哥，第三个说法是根据《秦本纪》记载，子婴是秦二世的侄子。这样，从秦二世的上一辈，到平辈，到晚辈都让子婴占了，这当然不可能。那么史学家是如何确定他的身份的呢？这就用到了等价信息。

好，我们就先从说子婴是秦二世侄子的《秦本纪》里找线索。在《秦本纪》中，还写了子婴在秦二世驾崩后杀赵高的事情，讲他「与其子二人谋」。也就是说，秦始皇的孙子子婴谋划杀赵高时，已经有了两个能够出主意的儿子。我们知道，秦始皇 49 岁就驾崩了，秦二世在 3 年后也驾崩了，那时子婴还是十多岁的孩子，不可能有两个能出主意的儿子杀赵高。

至于是不是他哥哥，这个可能性就更没有了，因为《史记》中写了秦二世怕他的兄弟和自己争皇位，把他的 20 多个兄弟都杀了。排除了这两个可能性，子婴只能是秦二世的叔叔了，而《史记》中也没有和这条信息相矛盾的记录。

当然，这是一桩史学界著名的悬案，目前也没有一个定论，我只是用自己的推导方法为你演绎了一下，面对错综复杂的信息时，如何利用其他信息的等价性为我们理清思路。而信息等价性的应用，在今天尤其广泛，对于指导你处理复杂信息会很有帮助。

在很多时候，我们直接得到一种信息，或者原封不动地保留一条信息并不容易，但是却可以从等价的信息中导出所要的信息。当然，这样倒手一次的操作需要一个桥梁，让原有的信息和等价信息一一对应。在信息科学中，最著名的桥梁就是傅立叶变换了。

傅立叶是十九世纪法国的数学家，他发现任何周期性的函数（信号）都等同于一些三角函数的线性组合。下面这张图，就是周期性函数的样子，也就是说它们的波形都是重复的。

![](./res/2019002.jpeg)

一般来讲，我们生活中的各种信号，都是随着时间变化的，比如一年中每一天的温度就是一个信号，它从每一年的第一天到第 365 天会有高有低地变化，如果我们把历史上全部温度的记录画成一条曲线，它大致就是上图那种周期性函数，一个周期就是一年。如果我们要记录 100 年间每天的平均气温，就需要三万多个数据，这个数据量比较大。但是由于它具有周期性，我们就有可能利用这种周期性来进行信息压缩。而对于这一类波动信号，信息压缩的基本原理大致如下：

1. 找到这种周期性信号的等价信息；

2. 对等价信息进行压缩；

3. 如果要使用原来的信号，通过压缩后的等价信息复原原来的信号。

这里面的关键，是找到等价信息。对于周期性的信号，等价信息就是一组正弦（或者余弦）波。正弦波的性质如下，大家可能并不陌生，因为它是最典型的波动曲线的性质。

![](./res/2019003.jpeg)

世界上所有的正弦波曲线形状都差不多，但是振动的幅度可大可小，振动的频率可高可低。比如下面这张图中的正弦波显然振动的频率就比较高，用句俗话讲，它抖动得特别快。

![](./res/2019004.jpeg)

19 世纪初，法国数学家傅立叶发现所有的周期性信号都可以用频率和振幅不同的正弦函数叠加而成，也就是说周期性信号里面所包含的信息和若干正弦函数的频率、振幅信息完全等价，这种变换被称为傅立叶变换。

如果利用傅立叶变换，可以将 100 年里温度变化的信息用大致 20 根频率和振幅不同的正弦曲线叠加而成。也就是说，100 年里 3 万多个温度样点里的信息，基本上就等价于 20 个频率数据和 20 个振幅数据，这样一来信息就被压缩了近百倍。今天音频、图像和视频的压缩，就是利用这个原理。其中的关键就是找出那个等价的信息。

今天我们见到的各种音频信号，包括我们的语音、音乐等等，在较短的时间内，都有相对稳定的周期性，比如下图就是一段语音，你可以看出它有一定的周期性。利用傅立叶变换，可以对语音进行压缩编码，然后传输，这样可以将语音信息压缩 10 倍左右，当然这样可能会有很少的信息损失，这一点我们后面再讲。但不管怎样，这样的信息压缩是非常合算的，比如用微信语音打电话，如果不进行信息压缩，可能要多用十倍的数据流量。

![](./res/2019005.jpeg)

那么图像又是怎么压缩的呢？它们看上去不像是有周期性振动的波形啊。这其实只是我们在宏观上看一幅图，但是如果我们用放大镜把图放得特别大，看到的就是一个个像素，而且相邻的像素之间颜色和灰度的变化会是相对连续的。利用这个特性，人们发明了一种被称为「离散余弦变换」的数学工具，也称为 DCT。

DCT 可以被认为是傅立叶变换的延伸，只不过它没有使用正弦波，而是采用了下面图中所示的 64 个基本灰度模板，任何照片都可以用这些模板组合而成。当然，对于彩色图片需要用带有红绿蓝三原色的彩色模板。这样一幅图片，就变成了一组数字，这些数字是模板中相应的模块的权重。我们经常使用的 JPEG 格式的图像，就是这么生成的。

![](./res/2019006.jpeg)

当然，对于 JPEG 图片，你会发现各种图像压缩工具允许你根据对清晰度的要求，压缩得多一点或者少一点，这里面的技巧我们后面介绍信息损失时再讲。

通过上述语音和图像的压缩，我们介绍了信息等价性的应用。很多时候，一种原始的信息，它们虽然里面有很多冗余成分，但是很难直接压缩掉。但我们可以将它们转化为容易压缩的等价的信息，再进行压缩，然后进行存储和传输。在使用和接收到被压缩的等价信息后，我们先解压，再恢复回原来的信息。

不仅每一篇文章，每一段语音，每一个图片可以利用信息的等价性分别压缩，将很多相同形式的内容放到一起，还能进行更有效的压缩。之前有读者问我，在 Google 上什么东西都能够查到，难道它保存了互联网的所有的内容？这听起来难以置信。其实 Google 还真这么做了，只不过它在向大众服务时，把所有网页中的文字顺序打乱了，它按照每一个关键词在网页中出现的位置重新整理了互联网的内容。这样不仅方便查找，而且能够压缩信息，节省存储空间。这样当你查找时，它不仅能够告诉你你要找的内容在哪里，还能够根据每一个词出现的位置，恢复出原来的网页展现给你。这就是等价性在信息处理中的应用。

善用等价信息，是我们这个年代每一个人都必须掌握的工作技巧，这是我们这讲最希望你记住的一个知识点。比如说我们无法看清人体内部的情况，但是我们知道人体内有很多水分，水里有氢原子，它的电子在旋转中形成一个个微小的磁针，我们在人体外面施加磁场，就可以把水分子里的小磁针方向给排顺了，然后我们加入一个能够和水中氢原子共振的脉冲，就可以把人体氢原子振动的信息取出来。由于人体各个部分水的分布不一样，我们通过各个部分氢原子振动的信息，就可以把人的结构画出来。这就是核磁共振的原理。因此核磁共振就是利用了等价信息。

类似地，检测引力波的 LIGO 装置，检测希格斯玻色子的 ATLAS 装置，用的也是等价信息。我们今天在医院里做的大部分血项检查，都是在用等价信息。

## 要点总结

我们通过信息压缩来说明了等价信息的重要性，当然这个原则的应用要远不止信息压缩这件事情。它对于我们获取信息，乃至处理信息同样重要。

思考题：说说你是如何通过等价性原则找出一些难题的答案的，欢迎你和我在留言区和我交流。

预告：当然，对于信息压缩是否会丢失一些信息，这个问题我们下一讲再讨论。我们下一讲再见。

## 黑板墙

### 01

#### 1. 感想收获

今天这讲涉及到一些大家不太熟悉的知识，傅立叶与 DCT，大家记住一个名字与大致的用途即可。你了解 MP3 的含义吗？ 它其实是最流行的音频编码和有损压缩格式，它的出现大大降低了音频数据量的存储大小。

你可能好奇的是，压缩的是哪些信息呢？对我们人类的眼睛和耳朵来说，有的信号不重要，所以即使保留，我们几乎感觉不到，除非使用专业仪器。那么将其舍弃，会省不少事情，提高了传输的效率。

在此帮助大家厘清思路：为什么要讲信息压缩与等价性？这是因为我们前面几讲学到的基本编码之后还只是第一个动作，接下来我们要思考如何把信息高效传递出去。

#### 2. 知识解读：音频信号处理

我们知道，音频是来自于振动──我们说话的声音便产生于声带的振动。我们的耳朵是天然的信号处理系统，它在接收音频信号的时候要处理三个特征： 音量（信号振动的幅度）、音频（信号的频率，音调的高低）、音色（信号的波形图）。在处理信号的时候，我们根据这几个特征来分步处理。

#### 3. 延伸阅读：丁香医生、田吉顺

X 光、CT、核磁共振（NMRI）几种检查的区别？通过比较资料，我觉得知乎的这个问题下 丁香医生的回答很有质量：

https://www.zhihu.com/question/53315862

另外，我个人很喜欢丁香园这个品牌。其医学总监田吉顺是我在 2014 年听播客便认识的一个人：直帅、真实、为患者着想，今年得知他与得到 App 合作，开了一门小课，我感到很高兴。

### 02

说到等价性信息，我想到的是我们孩子的语文老师，给孩子们教的用缩句的方式背课文的方法，在以前我不是很赞同孩子背课文，我认为这个动作其实有浪费时间＋形式主义的嫌疑。但是，自从孩子开始用这种方式背课文，我就觉得其实背课文是一件很有意思的方式了。

第一是压缩了信息，通常可以把一篇近两百字的课文压缩到三四十字，便于孩子理解文章的主要脉络，更便于孩子对课文进行记忆。

第二，也是我认为最有意思的部分，就是还原（解压缩）的过程，在这个过程里，孩子要做的是根据已经被压缩的信息还原课文的原状，她需要脑补出画面，理解文中主人公的情绪，甚至感受那一刻的环境，并且选用合适的词语恢复课文的全部内容，有时候孩子能想的起来课文中的遣词造句，但有的时候孩子想不起来，就会自己发挥创造。这个时刻虽然没有完整的背出课文，但是对孩子自己遣词造句的能力，却是潜移默化的提升。

### 03

关于今天的思考题我想说说我的一点小习惯。每次出门旅行时玩我都会特意保留一途中的票据。这包括登机牌、火车票、打车票这类交通票据，也包括景点门票、博物馆的说明指南等景点宣传品，甚至吃喝、购物等每次消费的小票都有保留。一些特别的票据我还会写上简单的说明记录。

留着些票据决不是为了报销，而是当你日后写游记回忆时，只要简单的按时间顺序把票据排列一下，你每天去过哪里，看了什么、吃的什么、住在哪里、买了什么都可以很快还原。若是按时间配合上一些照片、录音、地图，那你瞬间就能回忆你每一天的细节。对于一些回忆模糊的事情只要根据这些线索稍加判断就可以还原出来。

我至今都留有十几年前去博物馆听讲解员的录音，配合上一些简单的照片立刻就能回忆出很多细节。在那个还没有流行每天微信晒图的年代，这些便是我旅行之中美好记忆的存证。

回复子路求学：睹物思人其实也可以睹物思景。长途旅行中会经历各种兴奋、震撼、陶醉、愉悦，当然也包括震惊、伤感、痛苦等等。这些情感都会促使我主动保留一些其中的线索，特别是实物。

人的记忆方式是把一整个场景中的很多细节分散到大脑各处分别储蓄，当你感知到其中一部份信息再次出现时就会联想起其他部分。你看到线索越多越准确，回忆起来场景的其他细节就会越多越精准。这些细节还包括听觉、嗅觉、味觉等等。

所以这些都可以被看作是压缩过的等价信息，而记录下来的方法其实就是有意识保留有精准信息的票据什么的啦。当然有了智能手机的时代，我们就拥有很多高效的保存方式啦，比如能记录定位的相片，你的各种支付记录，你的行车记录等等啦。

### 04

无法正面直观地亲眼目睹，就侧面类比找到等价。

我是这么理解等价性：它的底层概念，是把复杂的具体信息，用多种可计算的基础信息来表达，那些基础信息可能是正弦波、某些频率或灰度模板，我们利用这些『元素』，来还原成日常沟通的文章、语音、图像。换句话说，电话不必理解人们所说的语言，它从各类声波转换程电讯号来传递；显像器也不必懂照片，它只在意那每一小格中该以 RGB 哪种模版呈现。无法直观，就侧面表述，这过程中能压缩信息。

类似的概念，我觉得很像前两讲提到的『矢量化』Vector Quantized ，同样的地方是，用一种以上维度去换句话说，这之中抽象化原有资讯，尽管丢失少部分信息，但却是高效的作法。正如 JPEG 图档放大数倍后，虽然模糊不清，但在一般使用上传输效率大大提升。

吴军老师最后提到 MRI 的概念我特别有共鸣。在医院处理病人的 complaint，要像侦探一样追查线索，无法开肠剖肚、无法透视人体，所以要用很多『等价』的影像和血液检查来辅助判断。而一位医师的精进道路，就是不断优化撷取等价信息的能力，在一堆检查项目中筛出能佐证自己鉴别诊断的数值，见微知著、成为敏锐精准的医师。

### 05

我想到几个利用等价信息的场景：

1、我们对事物的各种评价方式大部分都是借用等价信息来完成。比如使用考试的方式获得学生的学习成效信息。考试成绩虽然不能完全准确和完全覆盖学习效果，但相对信息的损失，考试成绩可以在相当大程度上反应学生的学习情况。

2、数据处理时的「相关性」思维和寻找等价信息类似。比如我们购买房产以后，经常接到装修公司的骚扰电话，他们通过业主名单打电话推销业务就是认为业主信息和装修需求信息有比较强的相关性，也就把业主信息等价成了「流量池」。

3、很多物理量不易测量，可以借用等价信息。比如测量食物的热量时，我们不容易直接获得，我搜索到可以通过把食物放到测热器燃烧室完全燃烧，用水吸收释放出的全部能量，记录水质量和水温变化，进一步推算出热量值。这个方法中，食物能量和水的变化就是等价信息，前者不易直接测量，后者的测量却很方便。

### 06

从老师讲解的气温曲线的例子中可以看到，一条原本需要大量点信息来定义的曲线，通过正弦曲线叠加的等价性，被转化成了二十组周期和振幅的参数。在这个过程中，一条原本包含大量细节的，具体的曲线，被抽象化成为具有周期和振幅两个维度的，自带矢量化的一组信息；而前面的课程里讲过，矢量化是有利于简化和压缩信息的，因此这样的等价转化，实际上也让压缩与传输变得更加方便了。

前几天读到了一篇关于图片存储格式的科普文，现在回想起来才发现，像 PhotoShop 这样的软件，其实也是在运用等价性原理来储存文件的。

比如一张包含很多细节的大幅数码图片，本质上是一张高像素的图像数据包，那么经过 PS 处理后，会用什么方式来保存呢？如果直接将 PS 中所有的处理结果都直接记录到每个像素中，不仅会占用大量存储空间，再进行改动的时候也会非常麻烦。

而 PS 使用的方法，是将作为处理结果的图像，转化为原图和一个个「处理步骤」，比如在哪一个图层上的什么位置，套用了什么类型的、多大的滤镜，滤镜的参数又如何调整。虽然具体信息仍然很复杂，但这么做是对处理步骤进行了等价处理，实际上降低了图片的存储空间，还让这些参数调用、修改更方便。

比如将一张大约 40MB 的数码相机原片导入 PS，套用 ACR 滤镜做一些基本处理，输出的 JPG 成片大约 12MB，但是用于记录处理步骤的 .xmp 文件，只有大约 10KB 左右。