# 0108. 信息增量：信息压缩中的保守主义原则
> 吴军·信息论 40 讲
2019-06-06

我们上一讲讲了信息的等价性，以及如何利用等价性压缩信息。说到信息的压缩，大家可能会有这样一个体会，就是视频的压缩比要远比图片的高很多。大家的这个观察是完全正确的，它们通常会相差两个数量级，也就是说 JPEG 图片能压缩 10 倍基本上也看不出损失，而 MPEG 视频能压缩近千倍，肉眼也分辨不出来是压缩过的。

有人就问我，那么能否用视频的压缩方式压缩图片，达到上千倍压缩的效果呢？简单的答案是不能，因为视频压缩时，利用了信息的相关性，能够采用所谓的增量编码，而单一一张图片中，不具有太多的相关性可以利用。所谓利用相关性进行压缩编码，简单来说就是如果两个信息「长得很像」，只要保留一个，对另一个，只要保留它们的差异，然后进行微调就行了。

要讲清这里面的原理，我们先来看一个简单的例子。

如果我们要对这样一组数：

3210，3208，3206，3211，3220，3212…… 进行编码，需要多少比特（或者多少字节）呢？

我们首先观察到，这些数字毫无规律可言，不存在哪一个出现的概率更大，哪个更小的问题，因此无法利用哈夫曼编码的方法，将比较短的码分配给出现概率高的数字，我们只好将它们一一编码。

由于这组数字都是三千多，我们需要用 12 位 2 进制表示每一个数字，也就是说每个数字编码长度为 12 比特。因为如果用 11 位二进制，那么 2 的 11 次方是 2048，它不能涵盖 3000 多的数字，而 12 位 2 进制能表示到 0~4095 的数字，所以我们用 12 位二进制来表示。但是，我们还注意到一个现象，那就是各个数字变化不大，它们的动态范围不超过 16。因此，我们可以利用这个特性进行压缩编码了，具体的做法是这样：

1. 对第一个数字使用 12 比特的编码，我们没有办法做得更精简。

2. 对第二个以后的各个数字，我们将它和上一个数字相比较，发现它相比前一个数字，动态变化的范围在正负 16 以内。因此，我们只需要对差异（也被称为增量）进行增量编码，就可以了。对于这些增量，如果不考虑符号的话，我们用 4 个比特就够了，因为 log 以 2 为底 16 的对数等于 4，也就是 2 的 4 次方等于 16。当然，增量可以是正，也可以是负，我们再加一个比特的信息表示符号，于是从第二个数字开始，我们采用 5 个比特就可以表示它和前一个数字的区别了。

于是我们可以将上面一组数字做如下的编码：

3210 【-2】【-2】【5】【9】【-8】…… 于是除了第一个数字还需要 12 比特之外，剩下的只需要 5 个比特即可（4 个比特表示变化范围的区间是 16，1 个比特表示加或者是减），相比原先每个数字 12 字节的编码，压缩比大约是 2.4:1（12:5）。

在解码时，我们先解出第一个，然后解出后面的增量，再根据上一个的数值和当前的增量，恢复出一个个原来的信息。

今天对于视频的压缩，用的就是上述原理。我们知道一般的视频一秒钟有 30 帧，高清的是 60 帧，4K 的是 120 帧（甚至 240 帧）。每一帧视频之间的差距其实极小。我们对第一帧视频（也被称为主帧）进行全画面编码，对于这一帧的压缩比，其实不会太高。但是对后面每一帧的视频，只要针对它们和上一帧的差异进行编码即可，这样除了主帧外，后面的每一帧的视频，其实编码的长度非常短，视频文件就显得比较小。

我们上一讲说到的 Google 搜索所用的索引，其实也用到了前后相关性进行压缩。搜索引擎的索引是什么东西呢？它是把每一个单词在全部网页中出现的位置列出来。比如「中国」出现在第 50001，50008，50300 等位置，「科学」出现在 50009，50045 等位置。

由于互联网上的网页数量巨大，单词的位置如果从头到尾排一个序，大约要排到几百亿，这些数字就很大。Google 的做法是每一个网页只保存第一个单词的起始位置，剩下的单词是相对第一个单词的位置。比如某个网页起始的位置是 50000。那么刚才我说出现「中国」这个词出现了三次，它的索引记录就的是 50000，以及位移量 1，8 和 300，「科学」这个词相应的一段索引，记录的是 50000，和位移量 9，45。这样就能有效压缩信息的长度。

在搜索时，如果要找同时包含「中国」和「科学」的网页，只要看看它们是否有共同的网页起始位置即可，比如它们出现在了起始位置为 50000 的网页中。如果非要找「中国科学」（连起来的）这个词，除了保证它们在同一个网页中出现外，还要保证它们的位移量相差正好是 1。因为在这个例子中，「中国」的位移量 8 和「科学」的位移量 9 正好差 1，我们就知道它们是相邻的了。

通过这种方式，网页搜索的索引可以在很大程度上节省空间（大约节省 75%），而且这种信息压缩是无损的。

当然，凡事有一利就有一弊。正如我们前几天所讲，当我们把信息冗余都挤掉后，编码长度非常短时，容错的性能就会下降。你过去看影碟可能有这样的体会，当光盘被划了一道，它就经常跳盘，这就是因为视频的压缩是前后相关的，中间坏了一点，很多帧的视频就都看不了了。为了防止这样编码造成的累积误差，也为了防止中间有一点点信息损失，后面的视频统统打不开，所以，每过若干帧，我们就要重新产生一个主帧，以免错误会传递太远。

信息的前后相关性，其实是信息本身固有的特征。或者说，绝大多数时候，我们这个世界的变化是渐进的，而不是完全随机的。不仅在信息的世界如此，在我们的生活中也是如此。我在过去的专栏里讲了保守主义的做事态度，它的好处其实是由我们这个世界渐变的特征决定的。因此，在绝大多数时候，我们不需要推倒重来，只需要对变化进行一些修补就好了。有些人看不起总在修修补补的做法，觉得缺乏革命性，但是从信息论的角度讲，保守主义的做法成本最低。

在美国生活过的人，一开始会发现两个难以理解的现象。

第一个是美国的税法很复杂，每年报税是一个工作量很大的任务。那么为什么要把税法搞得那么复杂呢？这就是利用增量进行修修补补的结果。每一个群体都有自己的利益，都想要尽可能让自己能够多免税，于是各方博弈，在原有的税法上不断修补，就成了今天的样子。这样经过长时间迭代，总算各方面相对满意。当然，过了很长时间，一些税法跟不上经济和社会发展了，就要作大的调整，这就如同视频压缩时，一旦新的画面出现，就要重新开始一个主帧一样。

第二个现象是学区划分得犬牙交错。这也是为了平衡各方面利益不断修补的结果。

因此，不要根据「保守主义」这四个字就认为英国人和美国人保守，它其实更多地反映在这种渐进的做事方式上。甚至美国的宪法也是通过修正案的方式在作微调，而没有像法国和德国那样几次彻底修改宪法。正是因为渐进，牵扯的利益不会太多，才能够推行得下去，从长期来看才能发展。

如果想一次完成巨大的突变，常常会因为牵扯的利益太多，最后总是搁浅，永远改不了，结果反而是不进步。这就如同我们如果非要对一个 2 小时的电影每一帧都保留全部的信息，那么一部电影的数据会大得在网络上无法传输，我们的计算机播放电影就会不断卡壳，我们看到的画面反而不如压缩的清楚。

## 要点小结

首先，我们讲了善用信息前后的相关性，对于后面的信息做增量编码，达到大幅度压缩信息冗余的目的。

其次，我们把这种信息处理的方式，和保守主义的做事方法作了一个对比。所谓保守主义，其实就是坚持总体原则不变，不断作微调，达到渐进改变的目的。这样做，比每一次都推倒重来，或者干脆达不成一致，其实效率反而高，因为我们的世界在绝大多数时候都是渐变的。

思考题：如果说我们在视频压缩中有一个主帧的概念，后面各帧图像都是对它作对比，那么在我们的生活，什么事情其实扮演了主帧的角色？

预告：上一讲我们说了信息等价性，可以利用这个原理来进行无损压缩，在做事情时我们也要学会找出等价信息。这一讲，我又给你介绍了信息的前后相关性，可以对像视频这样的信息进行高压缩比的处理，进而告诉大家要找到自己做事的主帧，做一个保守主义者。下一讲，我还会告诉你，在压缩信息时，如何在压缩比和失真率之间保持平衡，看看你能收获什么启发。

## 黑板墙

### 01

#### 1. 总结

这一讲主要讲的是利用前后位置的相关性进行压缩的思想。前面的例子可以记为主干 + 微调，因为微调所相对于原来的信息量是小很多的（参见 5 比特：12 比特）。这种利用前后信息的差异，计算出来的增量，在数学当中可以用「差分算子」的方法提取出来。

    Δy = y(N) - y(N-1)

我觉得在现实中有很多应用的例子，大家想到好的应用可以和我互动。除此之外，我想和大家分享一个之前我学习统计学的知识。

#### 2. 延伸阅读 - 集中趋势与离散趋势

在研究时间序列 (Time Series) 的时候，会把时间序列按三个角度进行解读：

* 固定趋势

* 周期效应

* 随机扰动

固定趋势是指序列有本来的上升趋势，比如说按线性上升或者下降；周期效应就像是序列会一年四季按春 - 夏 - 秋 - 冬 - 春… 周而复始出现；

假设我们不考虑固定趋势，只剩下随机扰动的影响，这时我会先计算出序列的平均值，然后把随机扰动项记为偏离均值的「残差」。

为了方便大家理解，举一个股票的例子，这只股票的平均价格是 28 元，扰动项是：

0.05，0.03，-0.1，0.2，-0.09，0.05, … … 

这里的 28（平均数，Mean）就是序列的集中趋势；而残差项（Residuals) 就是原始信息的偏离程度 — 离散趋势。

我记得我的《时间序列分析》课程的老师，提醒过我们多次，真正有价值的信息，就藏在离散趋势当中。

### 02

今天的课程让我想到了平时的拖延症。拖延症很多时候是基于想要完美呈现或超预期交付，想了很多，总觉得想法还不成熟，迟迟不动手做，Deadline 到来时，通宵搞一个差强人意的成果提交，久而久之，恶性循环，就可能患上拖延癌症。

而做事情更应该：先锁定目标，尽快搜集和处理信息，先做一个初稿（或初级版本）做到最小交付，版本 1.0 只有拿得出手，不要追求很完美或很全面，不断审视你的初稿，前期不做过多投入，也避免把时间投入到不必要的地方，然后再来进行微调，小步迭代，不断打磨，做到一次比一次更好的交付和呈现，好的作品或成果都是改出来，不要抱有一次就能完美呈现的妄念。

### 03

利用相关性比对主帧，提高做事效率；以信息增量的渐进改变，做个坚定的保守主义者。

今天老师介绍另一种压缩编码的方法 —— 相关性。这其实是数学中的『位移』概念，若差距不大，就能将首位数字视作「原点」，而后面依序是相对原点作或正向或负向的移动。由这个工具连结到 Google 使用的索引，忽然就一下听懂了，由理论到具体，以例证来加深我们学习印象。

当然，若其后每一帧都要与主帧比对，那就像鸡蛋放在同一个篮子，可想而知容易谬误，因此每隔几帧就必须再有个新的主帧，这是确保效率和正确性的平衡，也是所有传递信息工具的天秤两端。而生活中什么是我们的主帧？我认为包含两者：社会中各种角色，以及基础的知识技能。

譬如在家中要扮演爸爸的角色、公司中当个主管，必须以该角色为基础去发挥，这是去比对最初的主帧；而每隔一段时间必须与时具进、提升工作技能，这是要更新主帧，才不致于玩不出新把戏、被新人赶超。

我进入医院实习，也是以在学校学到的知识为本，不断在临床过程更新认知，用病人表现病情的 pattern 和国际定期更新的 guideline 来 update 主帧，这是资讯上的保守主义，最牢靠，也最踏实。

### 04

听了吴军老师对信息压缩、增量编码以及主帧的介绍，让我想起刚从学校毕业的时候遇到的一件小而重要的大事。记得刚毕业进入工地的时候，有一次测地面标高，我配合一个老师傅，他看水准仪，我拿尺子。测了一会，他对我说：来你看仪器，我给你扶尺子，我说好。

他就开始听我的指挥，来配合我，我看了一下尺子的数字，问他刚才看的基准点是多少，老师傅说你不应该问我看的基准点，你应该重新看基准点，现在是你在测，如果我把基准点看错了，你不就跟着我错了。你应该自己看基准点。

这件事过去了十几年，每次在带新同事的时候，我都会把这件小事在他们身上在发生一次，然后把这件事在给他们讲一遍，这应该就是主帧。再此感谢那位老师傅，给我上的一堂生动的课。

### 05

生活中的「主帧」从不同维度上看有不同选择，比如选择事业领域、生活地区、人生伴侣都是主帧，在确定了主帧之后，其他相关事宜可以在小幅度之内做微调。比如创业时选择合伙人，最重要的是其人品、热情和能力，三者可以看作主帧。其他的因素比如个人爱好、生活习惯、家庭稳定性等都是次要因素。

通过今天的学习，我也理解了做事情要先思考一下主要矛盾，即主帧，找到最核心、影响力最大的部分，给它留出最多的资源。如果精力不够，就可以把其余非主帧的部分以合作方式完成，甚至暂时舍弃。

### 06

从信息压缩的保守主义，我们可以深刻体会「革命」和「改革」的巨大差别：

1. 革命 —— 完全推倒重来。纵观古今中外王朝更替（革命），绝大多数伴随内战、流血，国外势力进行干扰时，很多无力应对以至于割地赔款。因为一旦进行大的调整，势必伴随利益集团剧烈的博弈，最后演变为暴力。这种暴力的成本更高，势必消耗国家资源。

2. 改革 —— 渐进和保守主义的修修补补。为适应国家形势，我国施行「国税 —— 地税」的两税制，实际上是中央和地方财政博弈，修修补补的举措。但这种折中的方案，一定程度保证了经济和社会发展，更没有出现巨大的问题。而今两税合一，也是适应发展的需要。试想如果用革命方式处理税制，中国地大物博、风俗各异，牵扯问题太多势必搁浅。