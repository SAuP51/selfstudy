# 0204. 方差：围绕数学期望波动程度的度量

刘嘉·概率论 22 讲

2020-07-24

上一讲，我们学习了数学期望，知道了数学期望是对随机事件长期价值的数字化衡量。明白了数学期望，就能完整的描述一个随机事件了吗？换句话说，学会了计算期望，就能清楚的衡量一件事的价值、指导我们决策了吗？答案是，不能。

## 4.1 数学期望不能完整描述一个随机事件

比如说，你有一笔闲钱，现在有两个投资方案：1）收益非常稳定，100% 净赚 5 万元；2）收益不稳定，50% 的机会赚 20 万元，另外 50% 的可能性是赔 10 万元。

两个方案你会选择哪个？可能很多人都会说：废话，肯定是第一个嘛。别慌，让我们按上一讲说的，计算一下两种方案的数学期望。第一种方案，5 万元；第二种方案，也是 5 万元。从数学期望的角度来说，两个方案没啥区别，都值得投资。但你能说这俩方案是一样的吗？显然不能。具体的区别在哪儿呢？

区别就在于，俩方案收益的稳定性不同：第一个方案非常稳定，稳赚不赔；而第二个方案非常不稳定，不赢 20 万就得输 10 万，波动性很大。问题就出在波动性上。上一讲我们说了，数学期望是对随机事件长期价值的定量化衡量。注意，是长期价值。对于大多数人来说，方案一稳赚不赔，可以长期执行；而方案二波动太大，很容易赔钱，根本没办法长期执行。

想象一下，你不是拥有无限财富的虚拟人物，而是一个手上现金可能都没有 10 万元的真实的人。比如我，零花钱也就 500 元。如果选择方案二，万一第一次就赔了 10 万元，别人找你要钱的时候，你可不可以告诉他：「请稍等，根据数学期望的计算结果，我继续投资下去肯定会赢，这样就有钱给你了」？当然不能。尽管从理论上说，这个想法是对的；但现实中的很多人，基本不会有继续的机会。

所以，数学期望相同，并不代表两件事的价值就一样。随机结果的波动程度，同样对一件事的价值，对我们的决策影响巨大。在描述和思考一个随机事件的时候，我们还得考虑这种波动性。这就涉及到一个专业概念，叫作「方差」。

## 4.2 随机结果围绕数学期望的波动范围

简单来说，方差描述的就是，随机结果围绕数学期望的波动范围。你看，方案一，稳赢 5 万，结果很稳定，完全没有波动；方案二，要么赚 20 万，要么亏 10 万，围绕着数学期望 5 万元产生了上下波动。这种波动性，就是我们说的方差。

对于一个随机事件，数学期望因为描述的是长期价值，所以无法反映这种波动性，但方差可以。方差就是通过一个数值定量了这种波动性，弥补了数学期望描述随机事件的不足。问题来了，方差怎么计算呢？一句话来说就是，结果的值与数学期望之差的平方的均值。重复一遍，结果的值与数学期望之差的平方的均值。听上去非常绕，我们举例子算一下。

上面第二个方案，50% 的概率收益 20 万元，50% 的概率亏 10 万元，每次投资的数学期望是 5 万元，两者之差是多少？对于收益来说，是 20 - 5 万 = 15 万元；对于亏损来说，是 - 10 - 5 万 = -15 万元。分别平方一下再求平均，方差就是 2.25x10^10。你要是方便，可以拿笔算一下，不算也不妨碍听懂。

而方案一，100% 稳赚 5 万，方差是多少呢？按上面的方法算，结果还是 0。方案一的方差是 0，方案二的方差是 2.25x10^10，很明显，方案二的方差要大得多，说明它的波动性非常大。

方案一的方差：

```
D = 100% x (50000 - 50000 )^2 = 0
```

方案二的方差：

```
D = 50% x (200000 - 50000 )^2 + 50% x (-50000 - 100000)^2 = 2.25x10^10
```

1『上面的计算公式里用 50% 乘会给人误解（50% 正好是题目里的概率），应该直接取 2 个平方的平均值，除以 2 算。（2021-02-13）』

顺便说一句，方差是概率论和统计学的重要概念，和它对应的有个概念叫「标准差」。标准差就是方差的平方根，它也能描述这种波动性。不过这些都不重要，甚至连方差的计算公式也不重要。你需要记住的只有一点 —— 方差，反映的是随机结果围绕数学期望的波动范围。

## 4.3 方差的本质是对风险的度量

方差描述了这种波动性，它有什么现实意义吗？当然有。

方差越大，说明这件事波动性越大。而风险，本质上指的就是波动性。所以，方差的本质，就是对风险的度量。一个随机事件的方差越大，可能的结果离期望值越远，就说明它的风险越大。比如，长期来看，股票的投资回报率，也就是数学期望更高，但为什么还是有很多人觉得股票是个坑，而愿意选择收益稳定的国债或者货币基金？其实就是考虑到了两者方差的不同。股票起伏不定，方差太大，风险太高；而国债或者货币基金很稳定，方差很小，风险也很小。

为什么我们常说「投资多元化」「不要把鸡蛋放在同一个篮子」？本质上也是基于方差的考量。如果把钱投入到一家公司、一支股票上，一旦它遭受冲击，亏损就会比较大；而如果分散投资，这种投资组合的方差就很小，风险也就更低。

即使不谈投资理财，方差在我们生活中也很有意义。任正非曾经对记者说，他觉得年轻的时候对不起孩子，因为当时自己是军人，一年才有一次探亲假。因此，一年 330 天都见不到孩子，而剩下 30 天天天见。就回家探亲这件事来说，这个方案方差就很大。如果换个探亲的方式，每 11 天回家 1 天，方差就小多了，而且做到了经常陪孩子，任正非的内疚感也许就不会那么强烈了。

你看，虽然都是一年 30 天看孩子，数学期望一样，但集中在 30 天和分散在一年，是完全不同的两种感觉。同理，工作也是一样。一家公司全凭能力、员工收入差距很大，而另一家公司待遇稳定、员工收入都差不多。虽然从长期来看，两家公司大部分员工的收入也差不多，但在这两家公司工作，你的感受可能完全不一样。为什么很多人喜欢公务员、事业单位，本质上就是因为这种工作的方差更小，波动性更小，也就是我们常说的更稳定。

## 4.4 如何对抗和利用方差

学习了方差的性质，能对我们产生什么样的影响呢？方差本身是中性的，无所谓好坏，但是我们在自己的人生中，确实可以通过采取不同的策略来对抗或者利用方差。

首先，我们可以通过增加本钱的方式对抗波动性。道理很简单，本钱越多，你承受风险的能力越强。回到开头的投资游戏，大多数普通人之所以不选择 50% 获得 20 万和 50% 损失 10 万的方案，其实就在于没有足够的资金储备。只要第一局输了，可能就被赶出了游戏，根本没办法等到长期。但换个角度，如果你是亿万富豪呢？如果你的本钱是无限的呢？可能某几次会输，但没关系，长期投资下去，你终将成为赢家。有了足够的本钱，也就有了把游戏继续下去，去搏数学期望的可能。

对于生活中的其他问题，和增加本钱类似，只要增加数据选择，就能做到对抗方差、对抗波动性。比如，预测一个学校的高考升学率，就不能只看某一个学生或者某一个班的成绩。这样风险太大。万一恰巧遇到的是个学霸班级，就会导致预测失误。这时候怎么办呢？增加数据量。把全校 10 个班的学生成绩都采集上来，甚至把全市、全省、全国的对比数据都采集上来，这样就能做出更准确的预测。

相反，通过人为设计主动扩大波动性，我们也能利用方差达到自己的目的。比如，如果你经营体育彩票，在数学期望确定的情况下，怎样才能刺激大家多买呢？其中一个方法就是扩大方差，增加波动性。

就像前面讲的，为什么明知道彩票是个赔钱买卖，全世界的彩票还都卖得出去呢？其实就是因为彩票公司把方差拉得特别大。大部分人不中奖，但一等奖、特等奖的奖金特别高，甚至高达 500 万，这样就会有很多人抱着中 500 万的想法去买彩票。如果把彩票的方差设置为 0，也就是，每张彩票都有奖，奖金都是几毛钱，肯定就没人买了。你看，通过扩大方差，增加波动性，这件事就变得很刺激。

生活里也是这样。虽然日常我们追求稳定，但是如果能在稳定的基础上适当增加一些方差，增加一些波动性，比如偶尔一次旅行、出去吃顿好的、给媳妇买个奢侈品包，都会让生活更加丰富多彩，幸福感更高。

## 黑板墙

同样给你布置两道思考题：

第一题是计算题：假设有一种基金，80% 的概率是获得 10% 的收益，20% 的概率是亏损 15%。你能算一下这种基金的方差是多少吗？

1『这里的关键点是先算出数学期望，可以按 100W 的本金来算，算方差的时候围绕「期望」这个标准点来算。另外一个注意点是算出来的 2 个差值平方后取平均值即可。（2021-02-13）』

答案：该基金 80% 的概率盈利 10%，20%的概率亏损 15%，那么这支基金的收益率期望为：`0.8x0.1+0.2x(-0.15)=0.05`。进一步，利用方差计算公式，我们计算可知这支基金的收益率方差为 `[(0.1-0.05)^2+(-0.15-0.05)^2]/2=0.02125`。

第二题是思考题：投资界有个「加倍投注法」—— 只要输一次，就加倍投注，直到赢为止。你能用这一讲的内容分析一下，这是一种必胜的手段吗？

下节预告：下一讲，我们进入课程的下一模块 —— 概率分布。看看数学家经常说的正态分布、幂律分布等到底是什么意思。

### 01

第二道题目。综上，1）该赌注稳赚，但收益率不会超过 100%，且随投注次数加而降低。2）胜率 p 越大，投入成本期望和方差都越低。3）每次投注倍数 a 越高，收益率的「下限」越高。这个故事告诉我们，胜率越大的事情，越应该加倍投入，不止两倍哦。

作者回复：其实，对于概率现实应用来说，计算本身没什么意义。关键是，有没有想过为什么要用方差？波动幅度为什么要平方？为什么不直接用绝对值？方差算平方真正的意义何在呢？关键在于：平均绝对值给所有差异提供的是相同的权重，而差异平方为距离平均值较远的数字提供更多权重。平方能有效的区分差异（这个基本操作可以在现实中各个场景使用）。而绝不只是，很多数学理论说平方在后续计算中非常方便，比如可微分。举个例子：

```
A：10、10、2、2

B：13、7、4、0
```

均值都是 6，很明显 B 波动幅度更大，但如果只做幅度和均值差的绝对值的平均，那着两个串的值是一样的。只有差的平方取均值，才能算出 A、B 系列的差异。平方能有效展示差异，为更大的幅度赋予更高的权重。计算 KP、OKR、绩效、工作考核，只要想让突出贡献或者特别差的表现所占的权重更高记得使用平方。

1『原来平方里面这么的门道。（2021-02-13）』

### 02

我们常说的服务好一般指两个概念，一个是服务质量高，一个是服务质量稳定。其中，衡量服务质量稳定的重要指标就是标准差。标准差常常和平均值一起作为参考数据，但是标准差考察的是分散程度，标准差越小，风险越小。质量管理中的六西格玛管理，指的就是要把缺陷率控制在六个标准差以内，相当于在 100 万次抽样中有 3.4 个缺陷，这是非常高的标准。当然，也有比这更高的标准，比如中国近十年来的飞机失事率大概是百万分之 0.1。之前姚明效力于 NBA 时，美国媒体就计算过姚明在一个赛季面对不同对手的得分、篮板和失误指标，并计算了均值和标准差。那些得分、篮板均值高，而标准差又小的比赛，姚明就被认为表现的更好更稳定。

作者回复：一个靠谱的人，一个情绪稳定的人，一个很多人眼中的好人，都是在行为、情绪、工作领域方差较小的人。所以，这些人也一般都挺无趣的。那怎么判断，她 / 他们的靠谱、稳定是装出来的还是真的如此呢？一般看她 / 他们私下会不会有很多异性喜欢，会不会有很多朋友。如果有，嘿嘿，可以怀疑他们有反差极大的另一面。

### 03

第二题是思考题：投资界有个「加倍投注法」一只要输一次，就加倍投注，直到为止。你能用这一讲的内容分析一下，这是一种必胜的手段吗？理论上，这是可以的。实际上，这是在作死。想要让这个手段必胜，必须要加上几个限定，比如资金无限，项目无限延续且市场无限大，你的投资时间无限。实际上，你的资金只够投个三五轮，项目很可能过一段时间就会有更多的投资人注资，你没机会了，更可能还没有进入高速发展期就进入衰退期了，你大概能活到自己破产之后。所以，用无限游戏的理想化思维投资，往往会给自己带来巨大的決策方向性失误。我曾经有一个朋友用这种思维买彩票，第一次运气好，一个月内三轮回本，小赚一笔，但是从第二次开始几乎就没坚持过六轮，工资都快不够买彩票了。

作者回复：记得小麦被国际象棋棋盘支配的恐惧吗。

1『指数增长的恐怖。（2021-02-13）』

### 04

方差描述的是波动性。方差的本质就是对风险的度量。按照这个理论，一个人的情绪如果不稳定，波动性很大，那么这个人做出決策的风险就很大。和这种人待在一起的风险就很大。反之，一个情绪稳定的人，做出理性決策的可能性就大。和这种人待在一起的风险就很小。

作者回复：如果一个人经常做极端的事情，那么他情绪的方差就太大了，而在我看来，情绪稳定是一切感情的基础。当然，情绪太稳定，它的方差太小，人生也就略有无趣，没有惊喜。这个度要有把握，度的把握オ是人生智慧。当然，万老师那个著名公式：喜欢 = 熟悉 + 意外，背后就是方差的逻辑。意外控制在 15% 左右，这是不少领域的经验值。

### 05

方差就是希望。心理学上有个「斯金纳箱」实验，将一只很饥饿的小白鼠放入一个有按钮的箱中，每次按下按钮，则掉落食物，结果，小白鼠自发学会了按按钮；如果，开始一直掉落食物，后面逐渐降低到每隔 1 分钟掉落食物，结果，小白鼠一开始不停按钮，过一段时间后，小白鼠学会了间隔 1 分钟按一次按钮。学会了偷懒；如果，小白鼠按下按钮，概率性掉落食物，结果，小白鼠学会了不停按钮，甚至培养出奇特的行为，比如撞箱子、作揖、转圈。这是因为掉落食物前，小白鼠正好在进行这些行为，于是产生了「迷信」；人类的赌博行为就是如此，波动性可以给人刺激，产生依赖，使希望诞生，甚至产生迷信。不同人对风险承受不同，对方差大小的喜好不ー，但方差等于零肯定不好，因为这意味着一成不变，没有惊喜，没有期待。

### 06

有一个好多年都没弄明白的问题：为什么是用平方差代表波动而不是用立方差或者四次方差呢？

作者回复：本质上，平方比差的绝对值要能有有效地予更大的偏离值以更大的权重，放大偏离值的影响。立方四次方，这个方法左右有点大。数学上，平方在放大偏离值的影响下，可以为后续计算提供非常方便的计算逻辑，能更有效的计算，比如后续的微分计算。

### 07

请问在股票投资里，方差反映的只是历史的情况吧？如果已经出现新的信息，比如说公司的基本面改变，这个时候方差应该用新的预期值重新计算吗？那这个新的方差值和历史的方差值应该是还有一定关系的，这在数学上有表述的方式吗？

作者回复：看业务逻辑，可以选择新的时间算新的方差，也可以使用一段时间平均期望和平均方差。金融模型会很复杂，甚至会根据时间片段进行加权平均计算，越近的权重越大。