# 0402. 贝叶斯推理：概率是对信心的度量

刘嘉·概率论 22 讲

2020-08-02

上一讲，我们详细说了条件概率。知道了条件不同，随机事件发生的概率就不同。我们还知道了，一切概率本质上都是条件概率。具体来说，概率问题可以分成两种 ——

第一种，是我们知道「原因」，要去推测某个「现象」。本质上，这些问题和掷骰子、抛硬币是一样的。知道了硬币是公平的，问它正面朝上的概率；知道了骰子是均匀的，问掷出一点的概率…… 都是知道了「原因」，要去推测「现象」。这类概率问题叫作「正向概率」。

在现实生活中，我们常常会遇到另一类概率问题 —— 看到了一些「现象」，要去推测背后的「原因」。拿看病这件事来说吧，「已知这个人得了流感，问他发烧的概率是多少」，先知道原因是得了流感，问发烧这个现象出现的概率是多少，这就是正向概率。但如果反过来问，「已知这个人发烧了，问他得流感的概率有多大」呢？这时候问题就反过来了，看到的现象是发烧了，推测导致发烧的原因。已知现象求原因，这就是「逆概率」问题。

生活里，逆概率问题非常多。比如，看到女孩接受了自己送的鲜花，推测她接受自己表白的概率有多大；傍晚看到了天边的晚霞，问明天会不会下雨；HR 看到了面试者的测评结果，判断这个人是不是契合这家公司…… 都是看到现象求原因，都是逆概率问题。

问题来了，对于逆概率问题，我们怎么解决呢？或者换句话说，怎么通过零散的现象猜测背后的原因呢？这时候，频率法就失效了。我总不能表白一万次，看看成功多少次吧？怎么办？解决这类问题的思路，其实就是这一讲要说的 —— 贝叶斯推理。

## 2.1 贝叶斯推理的基本逻辑

虽然「贝叶斯推理」这个词听起来很高级，但它的思路其实很好理解。咱们举个生活中的例子吧：

现在你的正前方，远远走来一个人，请问这人是男生还是女生呢？真要细究起来，其实挺难判断的。即使一个人长得非常像女孩，我们也不能完全确定 TA 就是女孩，对不对？你可能会说，离那么远，我怎么知道？随便猜一个，50% 对 50% 吧。但抬头一看，呦，这人一头长长的黑发披散在肩上。按常识来说，留长发的肯定女孩更多，男孩很少留这么长的头发，所以这更可能是个女孩。这时候，你就要调整自己的判断，可能是女孩的概率要提高到 70% 了。

再仔细一看，这人体型很娇小，而且腰很细，腰臀比很小，很有女性特征。自然的，TA 是女生的概率就更高了吧？但是，再走近些发现，这人背着一把大吉他，后面还跟着三位带乐器的男生。听到这儿，你应该明白了，这四个人很可能是个乐队。而在大部分乐队里，吉他手基本都是男生，很少有女生。自然的，想到这里，我们又要调整判断，这人是男生的概率又增加了。当然，我不是说没有女吉他手，这人一定是男生，而是说他是男生的概率非常大。就这样，根据新信息不断调整对一个随机事件发生概率的判断，这就是贝叶斯推理。

这种思维方式其实非常常见。比如我们去医院看病，医生最开始也不知道我们怎么了，但他们会询问我们哪里不舒服？发烧不发烧？哦，发烧。不过会导致发烧的病多了，普通感冒、流感、扁桃体发炎都有可能。所以医生会接着问，咳嗽不咳嗽？流鼻涕不流鼻涕？身体犯懒不犯懒？甚至还会让你去验血。最终，他会根据验血报告，根据各种病症，判断患者得了什么病，然后对症开药。你看，这就是贝叶斯推理。

再比如说侦探破案。我们知道，福尔摩斯第一次看到华生时，就断言华生刚到过阿富汗。他怎么知道的？其实用的也是贝叶斯推理。先是看到华生是医务工作者，但却一副军人做派，判断他是个军医；又看到华生面色黝黑，但是手腕上的皮肤很白，判断这人肯定刚从热带回来；又因为华生面容憔悴，而且左胳膊受过伤，就判断他肯定是历经艰难。综合所有这些信息，一名英国军医，刚从热带回来，而且历经磨难，还负过伤，那这人肯定是刚从阿富汗回来。

你看，侦探根据蛛丝马迹去调整判断、推测真相，也是贝叶斯推理。

## 2.2 概率是对信心的度量

听完前面的例子，不知道你有没有一个疑问：一个人到底是男是女，不是早就确定了吗？只是我们不知道而已。为什么我们刚才说对面这人是男是女的概率一直在变呢？换个角度，我们说「这人是女生的概率是 50%」的时候，我们到底是在说什么呢？是说这人是男是女这个事实吗？

其实不是。刚才说了，这人的性别早就确定了，要么是男生，要么是女生，不存在百分之几十的概率叠加问题。如果找到这人的一根头发，做个基因检测，我们马上就能确认他的性别，做过变性手术都没用。那我们这里说的概率，究竟是什么呢？

其实我们说的是，我对这个人是女生这个结果的「相信程度」达到了 50%。注意，是相信程度。相应的，在看到对方的长头发、娇小的体态后，我对 TA 是女生的相信程度提高了，就提高了这个概率判断。明白了吧？在贝叶斯的世界里，概率本质上是对信心的度量，是我们对某个结果相信程度的一种定量化的表达。

生活里，我们说的很多概率，其实表达的都是我们对某个结果的相信程度。比如说，一场精彩的球赛看下来，我们总说比赛跌宕起伏、千回百转，其实就是因为场上局势不断变化，我们对比赛结果、对某支球队输赢的信心在不断调整。再比如，当年苹果公司陷入危机，董事会没办法，只能邀请之前被自己踢出去的乔布斯回来。董事会邀请乔布斯来的时候，他们并不知道乔布斯会怎么重整苹果，更不知道乔布斯能不能带领苹果走出困境。他们只是基于过往的经验，相信乔布斯具有这个能力。你看，还是相信。当时，还有很多人不看好乔布斯呢。这也是一种相信。

其他的，比如我们说明天下雨的概率是多少、这个客户我能拿下的概率是多少、凶手是某某某的概率是多少时，也都是在表达一种信心。

## 2.3 贝叶斯推理的两大优势

根据新信息调整概率判断，听起来似乎挺普通的。但其实，这是一种非常高明的思维方式。它具有两大优势 ——

第一，起点不重要，迭代很重要。就像男生女生的例子，最开始判断这人是男生女生都没关系，甚至随便猜都可以，不重要，真正重要的是迭代。

贝叶斯不是推理一次就完了，它是个反复的过程。每找到一个新信息，就进行一次推理，得到一个新判断。而下一个信息，要么进一步证实我们的判断，要么削弱我们的判断，就要对之前的判断进行调整。这样不断微调、不断微调，慢慢的，结果一定会和真实状况越来越接近。毫不夸张的说，贝叶斯最后一定会无穷逼近于真理。这其实也能给我们一个启示，人生输在起跑线上不要紧，要紧的是你能不能做时间的朋友，不断迭代自己的认知和思维模型。

第二，信息越充分，结果越可靠。尽可能丰富的信息，是贝叶斯走向准确的最大保障。

拿机器学习来说吧，它的底层理论就是贝叶斯。为什么谷歌训练人工智能识别猫和狗时，要给它看成千上万张照片？为什么特斯拉的自动驾驶汽车要进行各种路测，千方百计收集用户开车的数据？就是因为数据越多，供它调整的机会越多，它的计算结果就会越精确，越逼近真相。现在，人工智能识别猫和狗的准确率已经可以达到 99%。

其实，手机的面部识别功能也一样。手机扫描我们的面部，比如说捕捉到 40 个位点的生物特征，它会记住这些特征。如果下一次一扫瞄，有 38 个特征都符合，很充分，八成是一个人，手机就会判断这人是手机主人，自动开锁。但如果只有 3 个特征吻合呢？这人是手机主人的概率太低了，手机就会拒绝开机。

生活里，为什么我们总是寻找新信息，争取信息完备？其实就是为了运用尽可能多的信息，提高自己判断的准确率，本质上还是贝叶斯推理。这其实是一种非常高级的思维模式。起点不重要，迭代很重要，就需要保持充分的开放和积累；而信息越充分，结果越可靠，又要求随时调整、不断逼近真相。这样每次精进一点，每次精进一点，这样的人可不就越活越通透，越活越聪明吗？

## 黑板墙

思考题：日常生活里，有些人看到喜鹊就开心，看到乌鸦就难受；还有些人相信「左眼跳财，右眼跳灾」。你能用这一讲说的贝叶斯推理解释一下这样的行为吗？

下节预告：贝叶斯推理的逻辑很简单，就是根据新信息调整概率判断。但这只是模糊的描述，具体要怎么调整？怎么做到定量呢？这就要用到贝叶斯公式去计算了。这个我们放在下一讲说。

作者回复：几何图形法是理解条件概率和贝叶斯最简单的方法。

### 01

在自然界中，乌鸦的嗅觉非常敏锐，能感受到腐败死亡的气息，因此乌鸦出现的地方，经常会有已经死亡或者将死的动物，也就常常被人们认为是不详的征召。而喜喜晴，天气好的时候就会出来活动，而天气好的时候，通常人们的心情会相对好一些，也会经常走亲访友，因此很多人都喜欢看到喜鹊。这其实就是贝叶斯定理在生活中的一种应用，通过已有的经验和信息，来推导好事或者坏事发生的概率。

而所谓的「左眼跳财、右眼跳灾」，在现实生活中可能确实有少数的时候得到应验，不过这只是小概率事件。从科学的角度讲，眼睛的跳动与「福祸」无关，主要是人的眼睑部位肌肉的异常痉挛造成的；而引起这种现象的是，可能是人的精神过度紧张以及劳累过度等等。所以，「左眼跳财、右眼跳灾」，就是由少量的信息推导出结论，而缺少了通过收集新信息、运用贝叶斯定理进行迭代和调整。

作者回复：非常好，这道思考题并不是单纯说这个判断迷信或是什么。而是做出这个判断的数据从哪里来的。从乌鸦的习性中来的，然后慢慢错误的运用到其它的生活场景中而已。

### 02

贝叶斯推理含着一个推理思路，那就是「虽然存在牵强之处，但至少比无头绪要强多了」。贝叶斯推理之所以显得有些「强」，主要是因为其中的先验概率。所谓先验概率，是指「在没有任何信息的情况下，暂且把所有可能性的概率设定为对等的」，或者「从主观上进行设定」等，因而会令人感到「牵强」。但反过来说，正是由于设定了这样的先验概率，贝叶斯推理从而具备了「即使只有少量信息（数据），也能够进行推理」的优点。

回到这个例子，人们喜欢看到喜，相信「左眼跳财，右眼跳灾」，是因为先验概率设定上出了问题。喜鹊代表着喜事，左眼跳意味着好事，这些都是「祖训」，也就是人们一直以来不断被「灌输」的一个说法，所以当一个人看到喜鹊的时候，他心里的先验概率可能已经是，今天要发生好事 80%，今天要发生坏事 20%。而人的一天会经历所谓的「好事」和「坏事」的概率其实是随机的，但是有了一开始不公平」的先验概率，人们就会继续增原来 80% 好事在自己心中的权重。

作者回复：先验概率的主观性，恰恰体现了认知的差异。每一次计算，你所得到的后验概率又会成为下一次的先验概率。这就是认知的升级这也就是我们常说的经验。

### 03

乌鸦属于食腐动物，凡是有死亡动物就会出现，而且乌鸦声音难听。不喜欢乌鸦在情理之中。贝叶斯思维最后一定会无穷逼近于真理。让我相信自己可以慢慢掌握反身性理论，人要在动态和反馈中不断调整，这个理论看了很多遍感觉吸收不了，今天这讲让我有信心了。问老师一个问题，计算机不是按照程序走，对于数据背后原因不是应该人判断么？一直没想通透这个问题。

作者回复：但计算机可以通过统计学发现某个事 A 和某个事儿 B 总是一起出现，那么这就是条件概率。所以，反过来看到 A 出现了，我们对 B 出现的信心提升了。这就是贝叶斯。

### 04

感悟：《贝叶斯方法 一一 概率编程与贝叶斯推断》，这本书比较适合于 IT 部门的程序员迅速的掌握贝叶斯统计的基本思路并投入运营。《统计決策理论和贝叶斯分析》，这本书适合于想专门在这个领域搞点东西的研究生阅读。《贝叶斯数据分析》，这本书篇幅很长，需要大量的时间阅读学习。《贝叶斯统计方法 R 和 BUGS 软件数据分析示例》，在所有适合作为教材的贝叶斯书籍之中，这本书的整体难度也许是最低的。《蒙特卡罗统计方法》，可以作为贝叶斯统计入门以后的高级参考书来读。

2『这基本书籍都要去下载电子版。（2021-02-14）』——未完成

### 05

如如果我们来到一个陌生的地方，有一个人正在掷骰子，连续 10 次都掷出了六点，那么下ー次出六点的概率是多少？如果是在实验室环境，那么毫无疑问概率仍然是 1/6。但在陌生的环境之中，我们就要反问一下自己：骰子是不是被动过手脚了？这其实就是一种贝叶斯推理的思路，运用贝叶斯推理来进行复盘；其中的价值，不仅在于评估自己的决策水平，还要评估环境因素对于概率的影响。比如说我们对陌生环境中骰子的情况一无所知，就不能凭主观想象来进行推测。而贝叶斯推理的强大之处就在于，你可以先估计一个值，然后根据客观事实不断修正；用客观的新信息，来不断迭代、更新我们已有的信息，进而得到一个新的、改进了的推断。当你下一次作策的时候，就可以基于这个改进过的推断。可以说，贝叶斯定理为我们提供了一个思路，每一条新信息都会影响你原来的概率假设，你需要根据现有的信息来重新计算概率、调整決策思路。所以，厉害的決策者，都是一个贝叶斯高手；他开始的时候未必比其他人高明多少，但却可以通过不断更新、迭代自己的思维模型決策系统，让自己通向成功的概率变得越来越高。

### 06

根据贝叶斯推理的优势：起点不重要，迭代很重要。假设有个人先编出「左眼跳财，右眼跳灾」的俗语，然后告诉给其他人，假如下一次这些人眼皮跳的时候，有 50% 应验了，那他们就会相信，并把这个顺口溜传给其他人对于没有应验的人，可能下一次又会有一半的人应验，那他们可能也会相信，于使继续传下去，相信的人也就越来越多。

最后心理学也起到作用，左眼跳了，就在心里暗示自己，一定会有好运，自己也会更加努力、抓住机会；右眼跳了，就暗示自己，今天运气不好，努力了，越不努力，可能运气会更差。（好像有心里学的例子就是班的学生智力水平都差不多，然后随机选择一半的学生，告诉他们很有天分；再告诉另半的学生他们很差劲。多年以后，发现被告知自己有天分的学生中，成功的人数要比另一半学生多得多，这就是心里自我暗示带来的影响。）

作者回复：自己对自己的信心，并不是只有成果进行反馈的，还有很多其他心理因素。这都是数据。所以，邓林克努格效应，你可以理解，是贝叶斯计算中你知道的信息知识越多你越客观的认识自己。而啥都不知道的反而不能清楚认识自己的位置。所谓智者充满忧虑，而其他人盲目自信。

### 07

我有一点疑惑，虽然全国各地每年都搞很多消防培训工作，但是每年的事故数量并没有减少，事故发生的概率也没有降低，是我们努力的方向错误了吗？是我们没有真正找到影响事故发生的決定因素吗？

作者回复：很多事情是真的随机，抛硬币再努力也不能提高正面的概率。而现实中很多问题把握住所有环节也未必能够完全避免火灾。而且把握这些环节付出的代价太高。这要用数学期望去判断。虽然这样说很残酷，但事实就是所有的事情发生都有概率，我们在设定一个合理的概率的底线的前提下评估成本收益的数学期望最高。

### 08

薛定谔的猫是死是活，这是一个关于相信程度的问题吗？是逆概率问题？如何理解我们的观测会改变事实呢？量子事件的概率，什么时候是正向概率什么时候是逆向概率呢？态函数给出的概率是哪种概率呢？

作者回复：首先叠加态是基于統计测度下的真实概率。而这也是我们物理学对加态的「信任」程度下的概率。

### 09

真不知道，除了贝叶斯定理之外，还需要别的理论吗。

作者回复：最基本的就是条件概率，然后条件概率变形成为贝叶斯公式，然后对贝叶斯公式的调整因子的计算和假设，形成了一堆方法，比如机器学习中的朴素贝叶斯。