# 0306. 假设检验 1：基于概率反证法的统计推断

刘嘉·概率论 22 讲

2020-07-30

这个模块，我们一直讲的都是概率分布。现在，我们已经理解了正态分布、幂律分布等多种概率分布。可是概率分布到底怎么用呢？它能做什么呢？这就是咱们这一讲的内容。简单来说，它可以拿来检验假说。就是当有人提出一个假说的时候，我们最终可以通过概率分布，来检验他这个假说到底靠谱不靠谱。

## 6.1 女士品茶

为了方便你理解，咱们先从一个「女士品茶」的故事说起。话说一个夏天的午后，英国剑桥的几个大学老师和他们的妻子，一群人在喝下午茶。突然，有一位女士说：我有一种超能力，一杯奶茶放在这里，只要尝一口，就能分清它是先加的奶还是先加的茶。在场的先生们哈哈大笑，这一定是你的幻觉。把茶加到奶里和把奶加进茶里，能有什么区别呢？但是，女士特别坚持，我就是能分清，你们怎么不信呢？就这样，事情僵在这儿了。怎么办？

科学证明的可信度当然是最高的。这件事能不能用科学方法直接证明呢？这确实是个思路，但怎么实现呢？我们得先化验一下，看看把茶加到奶里和把奶加进茶里，两种液体的化学分子有没有区别吧？如果有区别，还得证明这位女士确实能感知这种区别吧？这一通证明做下来，代价太高了，根本犯不上。有没有其他简单的操作方法呢？也有。

我们可以先假设「这位女士不能品尝出区别，全靠猜」，然后给她奶茶让她喝，看她能不能分辨出区别。先给她喝一杯，结果这位女士说对了。这好像没什么，就一杯嘛，猜也有 50% 的概率猜对。我们不能相信她。再给她喝一杯，结果女士又说对了。如果靠纯猜，连着两杯都猜对的概率是 25%。好像还是挺大的，还是不能相信。只能再给她喝第三杯、第四杯…… 结果，连喝六杯，女士都说对了。这个概率是多大呢？50% 的 6 次方，约等于 1.6%。也就是说，如果纯靠猜，女士连着六杯都猜对的概率只有 1.6%。这个概率太小了。就像一个学生，考试考了 98.5 分，你能说他的答案全是瞎写的吗？显然不能。同样的，我们当然也没有理由再去质疑女士，而只能接受相反的结论，认为「她确实能分辨出差别」。

2『虽然看书籍「2019099 女士品茶」后已经理解了假设检验，但这里还是做一张术语卡片。（2021-02-14）』——已完成

简单来说，如果能证明一个结论发生的概率特别特别小，我们就可以推翻这个结论，接受和它相反的结论。这个推断的过程就叫「假设检验」。

假设检验，包含假设和检验两个部分。首先，我们先选择一个假设，随便选择一个就行，然后再去验证这个假设。怎么验证呢？就看它会导致什么结果。如果它导致了一个发生概率非常低、非常不合理的结果，那这个假设就不成立，我们就推翻这个假设，承认和它相反的结论；如果这个假设没有导致不合理的结果，那我们就不能推翻它。

比如女士品尝，先假设「女士不能品尝出差别，全靠猜」，然后再去验证它。结果女士连着六杯都说对了，这个概率非常小，只有 1.6%，可以说几乎不会发生。这时候，不相信她不行了，我们只能推翻原来的假设，认为「女士确实能分辨出差别」。而如果女士六杯说对了四杯、错了两杯呢？显然，即使纯瞎猜，这个结果也是很可能出现的。就像抛硬币，连抛六次，出现四次正面、两次反面，很正常嘛。所以这时候，我们就不能推翻原来的假设，也就不能相信这位女士。

先假设再检验，这就是假设检验的基本思路。到这里，还有一个问题没有解决：什么时候能推翻原来的假设，什么时候不能推翻，总得有个标准吧？

确实有标准。很多情况下，这个标准都是 5%，在女士品茶的故事里，我们用的也是这个标准。就是说，如果概率超过 5%，打死我我也不相信这位女士；但如果概率低于 5%，我就相信她。其实，只要女士连续五杯都说对，这个概率就是 1/32，小于 5% 了。但当时那帮绅士的英国科学家，非要让她六杯都对才行，看来这些人对这位女士的要求挺苛刻的。

有了假设检验，我们就拥有了一把利器，能够穿越复杂的现象，收获一个个相对靠谱的结论。比如去医院检查身体，医生会先假设这个人没病，然后通过一系列检查，看看能不能找到患病的症状。像新冠肺炎，只要核酸检测是阳性，这个人没被感染的概率就很低，基本上就确诊了。这时候，医生只能放弃「这个人没有病」的假设，转而认为「这人患病了，赶紧想办法治疗」。如果核酸检测是阴性呢？那这个人没有被感染的概率很大，就不能推翻原来的假设。你看，不也是同样的思路吗？

其实不止这些，假设检验一诞生就席卷了各个领域，几乎成为现代医学、心理学、经济学、社会学，乃至计算机科学等学科研究的底层方法之一。

## 6.2 基于概率反证法的统计推断

刚才讲的是故事和思路，接下来我用专业的术语再给你解释一遍。这部分听起来会辛苦一些，但我们学的就是数学课，这些术语也是科学家一直在用的，所以还请你打起精神。

第一个术语：H0（零假设）和 H1（备择假设）。这是一对假设，可以自己设定，只要互相对立就行。刚才说「你先设定一个假设」，这个假设就是 H0；和它对立的假设，就是 H1。女士品茶的故事，如果 H0 是「女士不能分辨出差别，全靠猜」，那 H1 就是「女士能分辨出差别」。

1-3『之前读书籍「2019099 女士品茶」时，知道「备择假设」非常重要，只有零假设没有备注假设，毫无意义。看到这里的信息，稍微有点感觉了，但还是无法完全理解。（2021-02-14）』

第二个术语：P 值。就是在 H0 这个假设下，当前现象以及更极端现象出现的概率。比如女士品茶，在「女士不能分辨出差别，全靠猜」这个假设下，出现了什么现象呢？女士连着六杯都说对了，概率是 1.6%。1.6% 这个概率，就是 P 值。

请注意，P 值的大小会直接影响我们的判断。如果 P 值特别大，我们就不能推翻 H0 这个假设，更不能去相信 H1；而如果 P 值特别小，就可以认为 H0 几乎不可能发生，转而去相信 H1。女士品茶里，1.6% 这个概率太小了，所以我们就推翻「女士不能分辨差别」这个假设，相信「她确实能喝出差别」。

到底 P 值多大，H0 才不能被推翻呢？或者反过来说，P 值小到什么程度 H0 就可以被推翻，对面 H1 这个假设就成立了呢？这个标准就是 ——

第三个术语：显著性水平。你可以把显著性水平想象成一把刀，一刀剁下去，刀这边是「不能推翻 H0」，刀那边是「推翻 H0，接受 H1」。

至于这把刀具体剁在哪儿，是往左一点还会往右一点，一般学界是有标准的，用得最多的就是 5%。只要 P 值小于 5%，就推翻 H0，相信 H1；如果 P 值大于 5%，就没办法推翻 H0。当然，也有一些领域觉得 5% 这个标准太宽泛了，就设置成了 1%。甚至像物理学在发现粒子等问题上，执行的这个标准是百万分之一，要严格得多。

总之，显著性水平要依领域而定，每个领域都有自己的共同体标准。

## 6.3 概率分布是假设检验的基础

女士品茶特别简单，P 值很好计算。复杂一点的案例，可就没那么容易了。比如，我在菲律宾遇到一个男人，身高一米七，请问这人在菲律宾是高个还是矮个呢？这时候，当然可以用假设检验来推理，但请问 P 值是多少？这时候我们压根没法计算。总不能因为一个人的身高问题，把菲律宾所有男人的身高都统计一遍吧？那怎么办呢？

答案是，用概率分布。找出菲律宾男人身高的分布图。我们知道，图里横坐标代表身高，纵坐标就代表概率。还记得 P 值的定义吗？就是在 H0 这个假设下，当前现象以及更极端现象出现的概率。所以相应的，图中身高一米七及以上的人的概率，也就是 P 值，自然就代表这群人的比例。

如果一米七及以上的男人只有 10%，那 P 值就是 10%。这个人在身高前 10% 这个区间里，肯定就算高个了。如果分布变了，一米七及以上的男人占 30% 呢？这时候 P 值就变成了 30%。还有 30% 左右的人比这个人高，他就不算高个了吧？

如果我们再把问题换一下：在整个亚洲，这个人算不算高个呢？这时候，就不能看菲律宾男人的身高分布了，得去看亚洲男人身高的分布状况。你看，分布不一样，问题的适用范围就不一样，得到的判断也不一样。

对于很多复杂的随机事件，需要把随机事件的概率分布图拿出来，并根据在图中的位置确定 P 值的大小。只有这样，才能和显著性水平比较，才能判断 H0 能不能被推翻。换句话说，假设检验是基于概率的反证法，而要用概率的反证法，就要用到概率分布。以概率分布为基础，得到靠谱、有价值的结论，正是概率分布的意义所在。

## 黑板墙

思考题：在日常生活里，你还能举出一些利用假设检验这个思路进行判断决策的例子吗？

下节预告：这一讲，我们说了假设检验的基本逻辑。可以看到，假设检验是一个很有效的方法，能帮我们得到不少有价值的结论。但是，这个神器有没有什么缺点呢？

### 01

假设检验可能存在抽样风险的问题。比如，我们想了解大学生当中存在抑郁倾向的问题，于是去了一所有一万名学生的大学调查。在显著性水平是 5% 的情下，我们假设人群中达到或超过 4% 的人有抑郁倾向，就断定大学生当中存在比较明显的抑郁倾向。当然，我们不可能采访所有的学生，于是我们就在食堂门口随机采访了 50 个人。结果发现，受访学生中有两个人承认自己有抑郁倾向，比例正好是 4%，我们可以据此认为自己的假设得到了检验吗？其实是不行的，因为学校有一万人，我们只采访了 50 人，样本空间可能太小。简单的用抽样的结果下定论，可能会得出错误的结论。

作者回复：样本的随机性是非常讨厌的坑。我们常说的「简单随机抽样」啥叫随机抽样，就是样本和现实要同分布。班上 50 个同学随机抽 3 个，根本就没法抽，你是随机抽岁数，还是随机抽成绩，还是随机抽身高，你很难抽几个学生和所有属性都同分布，甚至你很难抽出即便是一个属性同分布。

### 02

是不是先找出概率分布模型是正态分布、冥律分布等，每个模型计算 p 值方法不同，就可以找出事件发生概率区间以及指导实践。比如开车的每公里油耗问题，符合正态分布，找出几个因素认为他们导致油耗上升，找出事件记录，然后就不知道怎么下手了。

作者回复：首先，你的车宣布综合油耗是多少，然后厂家说的对不对呢？来，我随机找城里郊区高速，各种路段或者是混合路段，总共开个几十次，几百几千公里，并记录下，这形成个样本的数据，估计非常服从正态分布。然后一比，他说 10 个油，我开出 12 个油，这是正常波动，还是虚假宣传呢？你的样本的标准差，填补油耗的标准差，然后他宣布的油耗就是均值，看看你的平均油耗，出现在他正态分布的那个位置，如果最右边 5% 以内，你可以说这油耗不靠谱，如果不是，你只能撇个嘴，说你等着，我再看看。

### 03

请问老师假设验证是不是只能用于正态分布的现象？如果不是正态分布的现象，就不能用假设验证。还是说调整显著性水平后，可以使用假设验证。

作者回复：假设检验当然可以用在各种分布上，这是一个基于概率的反证法。一般常用在正态分布，因为得出结论简单，也因为正态分布忽略了各种复杂影响因素的影响。

### 04

关于假设检验：1）首先，假设检验得到的结论不一定正确，只是尽可能降低犯错误的概率。如果检验的显著性为 p（p 值），那么接受原假设犯错误的概率在理论上就是 p。例如之前讲到的「男朋友投硬币连续五次正面朝上」的例子，这件事情发生的概率为 0.03125，足够让你怀疑他作弊，但你仍然有 0.03125 的概率冤枉他。2）前面之所以强调在理论上，是因为假设检验得到的 p 值和你设定的概率分布有关。在不同的概率分布下，会算出不同的 p 值，因此很有可能得出完全相反的结论。3）假设检验还有一个特点是，它更倾向于维护原假设 H0，也就是说，接受原假设 H0 和接受备择假设 H1 的机会是不对等的。通常，会把更加激进的假设 / 决策放在 H1 这个位置。例如，在对某种药物的临床试验上，会首先假设该药物对病人没有作用，然后再看假设检验的结果是否显著（p 值是否足够小）。这是一种保守策略，为的是尽可能降低错误策的风险。

### 05

核酸检测本身的准确度并不是特别高，体现在这次新冠疫情中，就是有不少多次检测都呈阴性的患者，最后仍然检出了阳性。因此，在临床经验中，会对疑似病人采用更准确的检方案 —— 肺部 CT 作辅助支撑结论。如果说疑似病患的 CT 结果显示肺部已经产生了病变，那么就有极高的概率是已经患上了新冠，并且病情已经十分严重。事实上，在疫情期间，就有前线的医生通过抽空做 CT 的方式，在还没有做核酸的情况下提前确诊了新冠，并因此得以尽快地进入诊疗阶段。

### 06

对于罪犯的审讯就是一个假设检验的例子。当一个人被控犯罪时，必然面临审讯；在英美法系中，控方提出控诉，由陪审团根据所有证据做出是否成立犯罪的裁定。而陪审团所做的，就是进行假设检验；这里面的原假设 H0 就是被告无罪，备择假设 H1 就是被告有罪。陪审团不知道哪个假设是正确的，他们就需要根据控双方所提供的证据进行判断。

在英美法系中，通常是假定原假设 H0、也就是被告无罪的假设成立，然后用一个个证据去进行验证，只有当所有的证据都不能被告无罪，也就是 H0 发生概率很低的时候，才能选择备择假设，也就是裁定被告有罪。这样做的目的，当然是为了竭力避免发生将无罪的人判定为有罪的错误，尽量减少这类错误发生的概率；但是，这种做法也可能导致将有罪的人判定为无罪的情况，让这类情况出现的概率有所提升。可以说，「针无两头尖」，这也是各有利弊的一种方法。

### 07

在线教育中学业水平测验系统的达标线（按学生成绩从低到高排列，位于 15% 位置的成绩定为达标线），是否符合假设检验，这里有四个参数：学生数量、分数（学业等级）、试题数量、试题质量，随着数据量的增加不断更新为 15% 位置的成绩为达标线，达标线是动态的。

那么，问题是这标准设定的可信度高吗？可以体现学生的真实水平吗？对应的就是 P 值，即对应考试标准设定的信度指标。起初可以人为设定一个达标成绩，随着测试题目数量的增加，各分界分数的等级线决策信度均持续提高，就可以交付个达标线，但这个过程是如何起作用，如何达成？

我的粗浅理解：1）题目质量和数量保障，质量如区分 A 试卷、B 试卷、C 试卷，难易度不同。题量如至少 45 题（或 70 题以上）。2）学生数量和学业等级区分，数量至少 3000 人，等级按分数从而将不同水平的被试区分开来。3）计算各个等级和试卷的得分比率。