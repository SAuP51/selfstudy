## CH0501初识CLI应用

### 课件

如何编写一个 CLI 应用，我们需要：

1、理解 CLI 应用和 CLI 的好处。

2、掌握 CLI 的应用实操，并且编写一个简单的 CLI 应用。

在第五讲中，我们将一起学习：

1、CLI 应用的基础概念；

2、CLI 的好处；

3、CLI 的编程实操。

CLI (Command Line Interface) 是命令行界面。在图形用户界面得到普及之前使用最为广泛，以键盘作为输入源。

在 CLI 命令行界面执行的程序就叫命令行应用。

CLI 应用：语言层级。CLI 应用在开发层面一般不会用到最上面一层语言。

金字塔结构：操作系统的语言 => 通用开发的语言 => 特定领域的语言

系统默认自带的 CLI 应用，以及需要自行安装的 CLI 应用。

CLI 的优点：

1、操作自动化。直接输入命令，而不用通过多个菜单和窗口导航。

2、任务批处理。用户轻松地编写脚本，以自动执行一系列命令。

3、开发效率高。命令行应用的功能纯粹，无需花大量时间做界面。

### 实操获取的知识点

#### 01 Python 中 main 入口函数的作用

```py
if __name__ == '__main__':
    main()
```

每个 py 文件用 main 入口函数这种结构，那么当执行 py 文件时，无论是主文件还是被载入的模块文件，后台都会自动去识别。

GitHub Copilot 的回答（2023-11-04）

if __name__ == '__main__': 是 Python 中的一个常见模式。这个语句的目的是检查脚本是作为独立的程序运行，还是被导入到其他脚本中作为模块。

当 Python 文件被直接运行时，Python 解释器会把一个特殊的变量 __name__ 设置为 __main__。所以，if __name__ == '__main__': 的代码块将会运行。

然而，如果文件被导入为模块，__name__ 的值将会是模块的名字，而不是 __main__。这意味着 if __name__ == '__main__': 下的代码块在文件被导入时不会被执行。

这种模式允许或者阻止代码在导入模块时执行，这对于调试非常有用。

#### 02 Google 的 Fire 包

Google 的 Fire 是一个强大的库，它可以自动生成命令行接口（CLI）。这个库可以快速地从任意 Python 对象（包括函数、类、模块、对象等）生成命令行接口，这极大地简化了 CLI 的创建过程。

以下是一些 Fire 的主要特性：

1、简单性：Fire 可以从任意 Python 对象生成命令行接口，你只需要将这个对象传递给 Fire 函数即可。

2、易用性：生成的命令行接口使用起来非常直观，它的行为基本上就是你期望的行为。

3、强大的帮助系统：Fire 会自动生成一个帮助系统，你可以通过在命令行中添加 `--help` 参数来获取帮助。

4、Pythonic：Fire 使用的是标准的 Python 语法，你不需要学习任何新的语法或概念。

以下是一个简单的例子，说明如何使用 Fire：

```python
import google.auth
from fire import Fire

def hello(name):
  return 'Hello, {name}!'.format(name=name)

if __name__ == '__main__':
  Fire(hello)
```

在这个例子中，我们定义了一个函数 `hello`，然后将它传递给 `Fire` 函数。现在，我们可以在命令行中使用这个函数了：

```shell
python hello.py --name=World
```

上述命令会输出 `Hello, World!`。

Fire 库的这种灵活性和简单性使其在需要快速创建命令行接口的场合非常有用。
