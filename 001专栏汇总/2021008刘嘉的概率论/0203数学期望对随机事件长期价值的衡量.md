# 0203. 数学期望：对随机事件长期价值的衡量

刘嘉·概率论 22 讲

2020-07-23

前面两讲，我们知道了频率法可以度量概率，也学习了频率法的基础 —— 大数定律。现在，我们可以通过频率法，计算一件事不同结果发生的概率了。但知道了这些，我们就对这件事有了整体的认识吗？或者换句话说，我们就能清晰地知道这件事价值几何了吗？

比如，一只股票现在 50 块，有 40% 的概率涨到 60 块，有 30% 的概率保持不变，还有 30% 的概率跌到 35 块。你看，股票的价格是一个随机的事情，有涨有跌，还有保持不变，而且每个结果带来的影响也不一样，有可能涨到 60 块，也有可能跌掉 35 块。听完我刚才的描述，你对这只股票有了整体的认识吗？或者说得更直接一点，这只股票到底价值几何？值得不值得买呢？这时候，只有概率就不行了，我们还需要一个指标 —— 数学期望。

## 3.1 期望是对长期价值的数字化衡量

数学期望简称期望，计算方法很简单，就是对随机事件不同结果的概率加权求平均。用大白话说就是，先把每个结果各自发生的概率和带来的影响相乘，然后把算出来的数相加。哎，最后算出来的结果就是数学期望。回到上面的例子，那只股票到底值不值得买呢？计算一下盈利的数学期望 ——

```
E(profit) = (60-50) * 40% + (50-50)*30%+(35-50)*30% = -0.5
```

也就是说，虽然上涨的可能性比下跌的可能性更大，但整体上看，这只股票趋向于亏钱，不值得买。这就是数学期望。本质上，数学期望是对事件长期价值的数字化衡量。

刚才的股票是个简化的例子，我们再举个使用数学期望进行决策的真实案例吧。篮球有三种得分方式 —— 篮下、中距离和三分球。篮下进攻和中距离投中都是 2 分，而三分球距离更远，投中得 3 分。当然，距离越远投篮命中率一般就会越低。总之，篮下投篮命中率高，但是得分低，三分投篮命中率低，但是得分高。哪种得分方式更有效率呢？

更有效率，这是一个长期价值。而一旦判断一件事的长期价值，数学期望就派上用场了。每种得分方式的数学期望，可以用得分情况和平均命中率来计算。具体来说，篮下每命中一球得 2 分，如果平均命中率是 55%，那计算一下，篮下出手的数学期望就是 1.1 分。篮下投篮要么进得 2 分，要么不进不得分，不可能得 1.1 分。这 1.1 分是什么意思呢？它的意思是说，长期来看，平均每次篮下进攻可以得到 1.1 分。数学期望，就是用来衡量这种长期的平均价值的。

类似的，中距离投篮也是 2 分，球员的平均命中率是 45%，那中距离投篮的数学期望就是 0.9 分。三分球是 3 分，平均命中率是 35%，那三分球投篮的数学期望就是 1.05 分。如果方便的话，你可以拿出笔算一下。

篮下：2 x 55% + 0 x 45% = 1.1；

中距离：2 x 45% + 0 x 55% = 0.9；

三分球：3 x 35% + 0 x 65% = 1.05。

每种进攻方式的价值，原本没办法衡量，但计算完数学期望，就可以比较了。篮下进攻和三分球的数学期望比中距离都要高，所以尽可能多进攻篮下和投三分球，少投中距离，长期来看就是更有效率的选择。这可不是个思想实验，在 NBA 这个世界最顶级的篮球联赛中，不少球队是照这个思路建队的。当下流行的「魔球理论」就是这个思路。

你看，数学期望本质上就是对事件长期价值的数字化衡量。注意，是长期价值。一看到「长期价值」这四个字，我们就知道，数学期望之所以有效，也是因为大数定律在背后起作用。大数定律把局部的随机性变成了整体上的确定性，也就是概率；而数学期望又把概率代表的长期价值变成了一个具体的数字，方便我们比较。

## 3.2 计算数学期望必须把结果数值化

不过，用数学期望衡量长期价值也有一个前提，就是所有随机出现的结果都必须数值化，也就是变成一个具体的数。只有这样，我们才能计算。

比如你问「回老家工作好，还是留北京工作好」，如果只停留在「留北京工作机会多，但竞争压力大；回老家生活压力小，但发展机会少」这些条件上，就没法计算数学期望。只有赋予每个结果具体的数字，比如工作机会多对自己很重要，打 10 分；竞争压力小对自己没那么重要，打 5 分…… 这个问题才真正变得可以比较。

我们知道，游戏设计是需要一些随机性的，否则游戏就非常无聊，就没人玩了。对于一些简单的游戏，比如斗地主，最简单的增加随机性的方法，就是不能让人每次都摸一样的牌。而对于一些复杂游戏，比如网络对战游戏，游戏设计者会采用比如暴击率、格挡率等来增加一些不确定性，让游戏充满意外和惊喜。

对于游戏公司来说，怎么保证所谓的游戏平衡呢？换句话说，怎么做到不让某些职业特别强、某些职业特别弱呢？这时候，他们使用的就是数学期望。把技能的伤害、防御、暴击率、格挡率等指标全部赋予一个具体的数，然后放在一起，计算出每个职业生存的数学期望，最后通过调整达到在数学期望上的平衡。一些游戏会不断调整某些职业或某个英雄，比如这个太弱了，就增加 10 点攻击力；那个太强了，就减少 100 点生命值…… 其实，就是在调整它们的数学期望，争取达到长期的平衡状态。只有这样，才能提高游戏的公平性和可玩性。

明白了数学期望，你也能明白生活中的很多道理。比如我们常说「不能奢望靠买彩票发家」，为什么呢？咱们分析一下，假设有 1000 万张彩票，每张售价 1 块钱，其中有一张中奖，奖金 600 万。该不该买呢？先计算一下数学期望。我直接说结果，是 - 0.4 元。长期来看，每买一张彩票，就亏 4 毛钱，所以当然不应该买。几乎所有金融产品的价值，比如基金、股票是否值得投资，也都可以使用数学期望来衡量。如果赢的期望超过输的期望，也就是说，如果数学期望是正的，就证明它值得长期投资。这就是金融领域「价值投资」的真谛。

你看，当所有的随机结果都被赋了值，我们就可以进行比较了。通过计算数学期望，我们就能知道一个游戏是不是值得玩，也能知道哪些事值得做，哪些险不值得冒。

## 3.3 个体的数学期望并不一样

一旦要对结果赋值，你肯定马上就能想到，这一定存在个体差异。同一个结果，每个人赋予它的值肯定是不一样的。彼之砒霜，吾之蜜糖嘛。

举个例子，俄罗斯轮盘赌 —— 左轮手枪有 6 个弹仓，里面放 1 发子弹，其他 5 个弹仓是空的。对着自己的脑袋打一枪，如果空枪，你就赢了，奖金 100 万；如果有子弹，你就挂了，什么都没有。这时候，你愿不愿意玩这个游戏呢？

要计算数学期望，就涉及到怎么对生命赋值了：你可能会说，我的命是无价的，这个游戏永远不值得玩。可是，这个世界就是有人拿命参加俄罗斯轮盘赌。比如 1978 年，美国芝加哥摇滚乐队的首席歌手特里·卡什，就在表演这种游戏时送了命。可能他们觉得，玩游戏时获得的某些东西比命更有价值。

你看，同样一件事，在不同人看来，价值也是不一样的。这时候，数学期望对每个个体来说，就都是不一样的。这倒不是因为数学期望的计算方法不同，而是因为不同的人对随机结果赋予的价值不一样。但同时，我们也知道 —— 这种个体的主观考量，只影响数学期望的计算结果，而不妨碍数学期望起作用。

数学期望是衡量一件事的价值，判断一件事值不值得做的重要指标。它是一直正确的。所以下次遇到事，你需要的不是拍脑袋，而是计算一下它的数学期望。

## 黑板墙

给你布置两道题目。一道计算题，一道思考题。

第一题：一个掷骰子的游戏，掷出 1 点得 1 块钱，掷出 2 点得 2 块钱，以此类推。如果每参与一次都要付钱，请你算一下每局游戏最多付多少钱，这个游戏才值得玩？

第二题：在你的经历中，有哪些事情从整体期望上看是不值得做的，但按照你自己的价值判断，却是值得的呢？

下节预告：在现实生活中，虽然有了数学期望衡量长期价值，但不得不说，我们的决策还总是会失误。这是为什么呢？难道还有其他指标是我们没有考虑到的吗？

### 01

关于今天的第二道思考题，根据我个人的经验，生活中确实有很多事情，不能单纯的依靠数学期望去做判断，而是要依据自己的价值观来做出选择。比如说谈恋爱这件事情，既要花钱、也要花时间，而且从恋爱走向婚姻的概率，其实也很低；毕竟，这个世界上，一见钟情进而白头偕老、相濡以沫的事情，实在是少了。但是对于个人而言，恋爱却是人生中必不可少的经历，我们需要感受爱的温暖和甜蜜，也不得不品尝其中的苦涩、心酸甚至是痛苦。只有经历了这一切，人才能获得成长，才能真正得成熟；而这一切，显然是无法通过利益计算、用数学期望值来进行衡量的。所以，真实世界是复杂的，数学期望能够在很多时候帮助我们做出选择，但并不能够帮助我们解決所有问题；个人对于价值观念的判断和考量，也是非常重要的因素。

作者回复：数学期望永远是对的，只是每个人对价值的赋值不同罢了。什么叫三观一致？简单的说，我们对一件事儿的价值判断是否一致。煎鸡蛋多少钱米其林三星餐厅的煎鸡蛋多少钱一个？云南 7 日游值多少钱？1500 的团是不是划算？20 年没见的大学好友，只待一晚，是不是值得你放下手中接近 deadline 的工作，去陪他級旧聊天。

### 02

老师举例 NBA 的时候，不知道有没有考虑过遇到了「黑天鹅」—— 金州勇士的库里，以他刮起的小球风。靠投三分、远投夺冠了。大家都跑到外线投三分去了，连中锋也是，恩比德这么大高个也投奥尼尔、姚明这种传统中锋已没了。

作者回复：库里是一个个体，他远投命中率是史诗级别的。但是在他史诗级别的表现之前，火箭队的莫雷已经开始了魔球计划，三分战术的发展，首先取決于外线体毛级规则的改变，取決于球员普遍三分球命中率的提升，也取決于特定底角、45 度腰部三分战术的成熟。本质上是个正循环，不断提高整体三分球命中率，提高了三分战术的数学期望。

当然三分战术是主流也不是万能的，他的数学期望还没有到碾压中距离，同时三分战术的兴起，也会改变外线防守强度，忽视中距离的方式，导致中距离命中率会提高，数学期望又会发生变化。一切都是不断变化的，这就像竞争下的企业利润。当然对个体来说，不同的球员，更「合理」的战术是根据自己的命中率。比如，林书豪。中距离投的就很欢啊，因为对他来说，篮下得分的数学期望不断下降（身体素质下降、联防规则、无禁区三秒），而中距离都快成他的主要阵地战得分手段了。

### 03

有个问题我始终想不明白。如果一件事成功的几率是百分之一，重复做这件事一百次会不会增加成功的几率？答案是不会。我就很困惑，既然是有百分之一的几率成功，那我尝试两百次不就变成百分之二的成功率了吗？在这里我弄混了什么概念？还是说每一次做这件事的成功几率是百分之一，所以不管重复多少次都不会增加。

作者回复：事情成功的概率本身不会变化（只要你不改变事情成功的条件）。你成功的概率（做这件事）会随着你做这件事的次数的化而变化。这就跟抛硬币一样，硬币正面朝上的概率 50% 不会变，除非改変硬币本身。但你多抛几次，在这几次中，出现正面的概率会超过 50%。

本质上这时候随机事件本身发生了化，从下ー次抛硬币抛到正面変成「抛 10 次，至少有一次正面」。如果成功率 1/100 的概率的随机事件，你做 100 次，至少成功 1 次的概率，大概是 63% 左右。但创业也好，买彩票也好，那有时间做那么多次呢？千万分之一的彩票大奖中奖概率，你要买 1000 万次，中大奖的概率 63%。你需要每周买彩票 20 万。

1-2『这里提到的 63% 的概率，吴军的数学通识课里也提到过，一直不清楚其推导计算过程。一定要找到公式。回复：通过下面另一个人的提问信息，用的是泊松分布公式。（2021-02-13）』——未完成

### 04

有多少人是完全根据数学期望来行事的呢？我在第一次知道「圣彼得堡悖论」的时候感觉就是这才是平时我们做事的感觉，就是一做事凭感觉感觉靠近数学期望，人生就正确一点点；偏离数学期望，就损失一点点。由此得到 —— 锻炼数学思维很重要。

作者回复：人生一直在训练你的概率直觉。生存的概率直觉也许写在了基因里，通过几百万年的进化。但现代社会的决策概率直觉还需要不断的训练和寻找。

### 05

概率相当于无限游戏，时常会偏离均值，甚至出现极端情。就 1% 的成功率而言，认为做 100 次就一定可能成功一次的是有限游戏，不会有偏离均值的情况，更不会出现极端情況。我这样理解对吗？

作者回复：如果服人正态分布，1/100 的概率，平均做 100 次成功 1 次。这只是平均，这是长期视角，无限视角。但，有限视角呢？短期视角呢？这也是一种概率分布。随机做 100 次，成功 1 次的概率大概是 37%，一次都不成功的概率也大概是 37%，剩下 26% 的概率是成功 2 次及以上（其中成功 2 次的概率 18%）。这种在固定时间固定次数的情下，对发生次数的概率分布叫泊松分布。柏松分布搭了一座连接有限和无限，局部和整体的桥梁。